function polarToCartesian(e,t,a,n){let r=(n-90)*Math.PI/180;return{x:e+a*Math.cos(r),y:t+a*Math.sin(r)}}function describeArc(e,t,a,n,r){let o=polarToCartesian(e,t,a,r),s=polarToCartesian(e,t,a,n),i=r-n<=180?"0":"1";return["M",o.x,o.y,"A",a,a,0,i,0,s.x,s.y].join(" ")}var CALIBRATION_CHART=function(e){return e.type="calibration",e.optsGenerator=function(t){let a=extend({},CHART.opts);delete a.axis.x.label.text;let n=1,r=0;t.data.y1.values.length>0&&(n=Math.max(...t.data.y1.values),r=Math.min(...t.data.y1.values));let o=1,s=0;return t.data.y1.keys.length>0&&(o=Math.max(...t.data.y1.keys),s=Math.min(...t.data.y1.keys)),n=.01*Math.ceil(100*n),r=.01*Math.ceil(100*r),o=.01*Math.ceil(100*o),s=.01*Math.ceil(100*s),max=Math.max(n,o),min=Math.min(r,s),min-=.05,max+=.05,min<0&&(min=0),max>1&&(max=1),a.axis.y.min=min,a.axis.y.max=max,a.axis.y.padding={top:20,bottom:20},a.axis.x.min=min,a.axis.x.max=max,a.axis.x.padding={left:max/20,right:max/20},a.bindto="#calibrationChart .graph",a.axis.y.tick.format=d3.format(".2f"),a.axis.y.tick.values=[0,.2,.4,.6,.8,1,min,max],a.axis.y.tick.values=a.axis.y.tick.values.sort(function(e,t){return e<t}),a.axis.x.tick.format=d3.format(".2f"),a.axis.x.tick.values=[0,.2,.4,.6,.8,1,min,max],a.axis.x.tick.values=a.axis.x.tick.values.sort(function(e,t){return e<t}),a.axis.y.label.text="Fraction of positives",a.id=e.type,a.data={xs:{Reliability:"x1",Reference:"referencex"},columns:[["x1"].concat(t.data.y1.keys),["referencex",0,max],[t.data.y1.name].concat(t.data.y1.values),["Reference",0,max]],type:"line",colors:{Reliability:CHART.colors[0],Reference:CHART.colors[1]}},a.legend={show:!0,hide:["Reference"]},a.grid={x:{show:!0},y:{show:!0}},a.point={show:!0,r:5},a.width=qs("#calibrationChart").offsetWidth-30,a.height=qs("#calibrationChart").offsetHeight-qs("#calibrationChart h4").offsetHeight-22,a},e.generate=function(t){let a=e.optsGenerator(t);return CHART.charts[a.id]=c3.generate(a),d3.select(".c3-legend-item-Reliability text").text(`${t.data.scoreName}=${d3.format(".3f")(t.data.score)}`),CHART.charts[a.id]},e}(CALIBRATION_CHART||{}),CONFUSION_MATRIX=function(e){return e.type="confusionMatrix",e.optsGenerator=function(e){return e},e.generate=function(t){let a=e.optsGenerator(t);return qsa("#confusionMatrix .graph").forEach(e=>e.remove()),qsa("#confusionMatrix .graph-container").forEach(e=>e.removeClass("graph-container").addClass("confusion-matrix-tables")),qs("#confusionMatrix .confusion-matrix-tables").innerHTML=confusionmatrixtableTemplate(a),qs("#confusionMatrix")},e}(CONFUSION_MATRIX||{}),DISCRIMINATION_CHART=function(e){e.type="discrimination",e.optsGenerator=function(t){let a=extend({},t);return a.bindto="#discrimSlope .graph",a.id=e.type,a.colors={y1:CHART.colors[0],y2:CHART.colors[1]},a.width=qs("#rocCurve").offsetWidth-30,a.height=qs("#rocCurve").offsetHeight-qs("#rocCurve h4").offsetHeight-30,console.log(a),a},e.currentOptions=null,e.generate=function(t){let a=null;return t?e.currentOptions=a=e.optsGenerator(t):a=e.currentOptions,CHART.charts[a.id]&&e.clear(a.id),CHART.charts[a.id]={element:e.createBoxChart(a),isD3Chart:!0,resize:function(){e.clear(a.id),e.currentOptions.width=qs("#rocCurve").offsetWidth-30,e.currentOptions.height=qs("#rocCurve").offsetHeight-qs("#rocCurve h4").offsetHeight-30,DISCRIMINATION_CHART.generate()},redraw:function(){DISCRIMINATION_CHART.generate()},clear:function(){DISCRIMINATION_CHART.clear(a.id)}},CHART.charts[a.id]};var t=function(e,t){return e-t};return e.createBoxChart=function(e){let a=10,n=10,r=30,o=30,s=e.width-o-n,l=e.height-a-r,d={},c=[];for(y in e.data)for(i in d[e.data[y].name]||(d[e.data[y].name]=[]),e.data[y].values){let t=e.data[y].values[i];d[e.data[y].name].push(t),c.push(t)}for(let e in d){let a=d[e];d[e]=a.sort(t)}let u=d3.scaleOrdinal([CHART.colors[3],CHART.colors[1]]).domain(Object.keys(d)),p=[];for(let[e,t]of Object.entries(d)){let a=d3.min(t),n=d3.max(t),r={};r.key=e,r.counts=t,r.quartile=(f=t,[d3.quantile(f,.25),d3.quantile(f,.5),d3.quantile(f,.75)]),r.whiskers=[a,n],r.color=u(e),r.lcolor=d3.color(u(e)).brighter(2).hex(),p.push(r)}var f;let h=d3.scalePoint().domain(Object.keys(d)).rangeRound([0,s]).padding([.5]),m=d3.min(c),g=d3.max(c),E=d3.scaleLinear().domain([m-.05,g+.05]).range([l-20,0]),v=d3.select(e.bindto).select("svg");null==v.node()&&(v=CHART.charts[e.id]?CHART.charts[e.id].element:d3.select(e.bindto).append("svg")),v.attr("width",s+o+n).attr("height",l+a+r);let P=v.append("g").attr("transform","translate("+o+","+a+")"),C=P.append("g"),b=(C.selectAll(".verticalLines").data(p).enter().append("line").attr("x1",function(e){return h(e.key)}).attr("y1",function(e){return E(e.whiskers[0])}).attr("x2",function(e){return h(e.key)}).attr("y2",function(e){return E(e.whiskers[1])}).attr("stroke",function(e){return e.lcolor}).attr("stroke-width",1).attr("fill","none"),C.selectAll("rect").data(p).enter().append("rect").attr("width",30).attr("height",function(e){let t=e.quartile;return E(t[0])-E(t[2])}).attr("x",function(e){return h(e.key)-15}).attr("y",function(e){return E(e.quartile[2])}).attr("fill",function(e){return e.color}).attr("stroke",function(e){return e.lcolor}).attr("stroke-width",0),[{x1:function(e){return h(e.key)-15},y1:function(e){return E(e.whiskers[0])},x2:function(e){return h(e.key)+15},y2:function(e){return E(e.whiskers[0])}},{x1:function(e){return h(e.key)-15},y1:function(e){return E(e.quartile[1])},x2:function(e){return h(e.key)+15},y2:function(e){return E(e.quartile[1])}},{x1:function(e){return h(e.key)-15},y1:function(e){return E(e.whiskers[1])},x2:function(e){return h(e.key)+15},y2:function(e){return E(e.whiskers[1])}}]);for(let e=0;e<b.length;e++){let t=b[e];C.selectAll(".whiskers").data(p).enter().append("line").attr("x1",t.x1).attr("y1",t.y1).attr("x2",t.x2).attr("y2",t.y2).attr("stroke",function(e){return e.lcolor}).attr("stroke-width",1).attr("fill","none")}return P.append("g").attr("class","discriminationAxis").attr("transform",`translate(0, ${l-20})`).call(d3.axisBottom(h)),P.append("g").attr("class","discriminationAxis").call(d3.axisLeft(E)),P.append("g").append("text").attr("transform",`translate(0, ${l+20})`).attr("x",s/2).attr("y",0-a/2).attr("text-anchor","middle").attr("class","discriminationTitle").style("font-size","0.8rem").attr("dominant-baseline","hanging").text(`Discrimination Score=${e.score}`),v},e.clear=function(e){CHART.charts[e].element.selectAll("*").remove(),delete CHART.charts[e]},e}(DISCRIMINATION_CHART||{}),KS_CHART=function(e){return e.type="ks",e.optsGenerator=function(t){let a=extend({},CHART.opts);delete a.axis.y.tick.values,a.bindto="#ksGraph .graph",a.id=e.type,a.axis.y.tick.format=d3.format(".0%"),a.axis.y.label.text="Cumulative % < Score";let n=Math.round(10*Math.ceil(t.data.y1.keys[t.data.y1.keys.length-1]/10))/5;return a.axis.x={min:0,tick:{values:Array.apply(null,{length:6}).map((e,t)=>t*n)},label:{text:"Scorecard",position:"outer-right"}},a.data={xs:{y:"x1",ydash:"x2"},columns:[["x1"].concat(t.data.y1.keys),["x2"].concat(t.data.y2.keys),[t.data.y1.name].concat(t.data.y1.values),[t.data.y2.name].concat(t.data.y2.values)],type:"line",colors:{y:CHART.colors[3],ydash:CHART.colors[1]},names:{y:"% Bad",ydash:"% Good"}},a.grid={x:{show:!0,lines:[{value:t.data.score,text:`KS=${t.data.score}`,class:"ks-score"}]},y:{show:!0}},a.width=qs("#ksGraph").offsetWidth-30,a.height=qs("#ksGraph").offsetHeight-qs("#ksGraph h4").offsetHeight-22,a},e.generate=function(t){let a=e.optsGenerator(t);return CHART.charts[a.id]=c3.generate(a),CHART.charts[a.id]},e}(KS_CHART||{}),LIFT_CHART=function(e){return e.type="lift",e.optsGenerator=function(t){let a=extend({},CHART.opts);delete a.axis.y.tick.values,delete a.axis.y.max,delete a.axis.y.tick.values,delete a.axis.x.max,delete a.axis.x.tick.values,a.bindto="#liftGraph .graph",a.id=e.type,a.axis.y.tick.format=d3.format(".2"),a.axis.y.label.text="Lift";let n=Math.round(10*Math.ceil(t.data.y1.keys[t.data.y1.keys.length-1]/10))/5;return a.axis.x={min:0,tick:{values:Array.apply(null,{length:6}).map((e,t)=>t*n)},label:{text:"Decile",position:"outer-right"}},a.data={xs:{y:"x1"},columns:[["x1"].concat(t.data.y1.keys),[t.data.y1.name].concat(t.data.y1.values)],type:"line",colors:{y:CHART.colors[2]},names:{y:"Lift"}},a.width=qs("#liftGraph").offsetWidth-30,a.height=qs("#liftGraph").offsetHeight-qs("#liftGraph h4").offsetHeight-22,a.point={show:!0},a},e.generate=function(t){let a=e.optsGenerator(t);return CHART.charts[a.id]=c3.generate(a),CHART.charts[a.id]},e}(LIFT_CHART||{}),OGIVE_CHART=function(e){return e.type="ogive",e.optsGenerator=function(t){let a=extend({},CHART.opts);return delete a.axis.y.tick.count,a.bindto="#ogiveCurve .graph",a.axis.y.tick.format=d3.format(".2"),a.axis.y.label.text="Specificity / Sensitivity",a.axis.x.label.text="Probability Levels",a.legend={show:!0},a.id=e.type,a.data={xs:{Specificity:"x1",Sensitivity:"x2"},columns:[["x1"].concat(t.data.y1.keys),["x2"].concat(t.data.y2.keys),[t.data.y1.name].concat(t.data.y1.values),[t.data.y2.name].concat(t.data.y2.values)],type:"line",colors:{Specificity:CHART.colors[2],Sensitivity:CHART.colors[6]}},a.grid={x:{show:!0,lines:[{value:.2},{value:.4},{value:.6},{value:.8}]},y:{show:!0}},a.width=qs("#ogiveCurve").offsetWidth-30,a.height=qs("#ogiveCurve").offsetHeight-qs("#ogiveCurve h4").offsetHeight-22,a},e.generate=function(t){let a=e.optsGenerator(t);return CHART.charts[a.id]=c3.generate(a),CHART.charts[a.id]},e}(OGIVE_CHART||{}),PRECISION_CHART=function(e){return e.type="precision",e.optsGenerator=function(t){let a=extend({},CHART.opts);return delete a.axis.y.tick.count,delete a.axis.y.min,delete a.axis.y.max,delete a.axis.y.tick.values,delete a.axis.x.label.text,delete a.axis.x.min,delete a.axis.x.max,delete a.axis.x.tick.values,a.bindto="#precisionGraph .graph",a.axis.y.tick.format=d3.format(".3"),a.axis.y.label.text="Precision",a.axis.x.label.text="Sensitivity",a.axis.x.tick.format=d3.format(".3"),a.id=e.type,a.data={xs:{Reliability:"x1"},columns:[["x1"].concat(t.data.y1.keys),[t.data.y1.name].concat(t.data.y1.values)],type:"line",colors:{Reliability:CHART.colors[0]}},a.legend={show:!1},a.grid={x:{show:!0},y:{show:!0}},a.point={show:!0,r:3},a.width=qs("#precisionGraph").offsetWidth-30,a.height=qs("#precisionGraph").offsetHeight-qs("#precisionGraph h4").offsetHeight-22,a},e.generate=function(t){let a=e.optsGenerator(t);return CHART.charts[a.id]=c3.generate(a),CHART.charts[a.id]},e}(PRECISION_CHART||{}),PROB_LEVELS=function(e){return e.type="probLevels",e.optsGenerator=function(e){return e.attributes={class:"scrollable-table"},e},e.generate=function(t){let a=e.optsGenerator(t);return qs("#probLevelsTableDiv").innerHTML=problevelstableTemplate(a),qs("#probLevels table")},e}(PROB_LEVELS||{}),ROC_CHART=function(e){return e.type="roc",e.optsGenerator=function(t){let a=extend({},CHART.opts);return delete a.axis.y.tick.count,a.bindto="#rocCurve .graph",a.axis.y.tick.format=d3.format(".2"),a.axis.y.label.text="True Positive Rate",a.axis.x.label.text="False Positive Rate",a.legend={show:!0,hide:["Reference"]},a.id=e.type,a.data={xs:{ROC:"x1",Reference:"x2"},columns:[["x1"].concat(t.data.y1.keys),["x2",0,1],[t.data.y1.name].concat(t.data.y1.values),["Reference",0,1]],type:"line",colors:{ROC:CHART.colors[0],Reference:CHART.colors[2]}},a.grid={x:{show:!0,lines:[{value:.2},{value:.4},{value:.6},{value:.8}]},y:{show:!0}},a.width=qs("#rocCurve").offsetWidth-30,a.height=qs("#rocCurve").offsetHeight-qs("#rocCurve h4").offsetHeight-22,a},e.generate=function(t){let a=e.optsGenerator(t);return CHART.charts[a.id]=c3.generate(a),d3.select(".c3-legend-item-ROC text").text("AUC="+d3.format(".3f")(t.data.auc)),CHART.charts[a.id]},e}(ROC_CHART||{}),CHART=function(e){e.type=null;return e.charts={},e.colors=["#f9bc38","#85c72e","#27c3ee","#df3931","#8f50b6","#db1c9b","#e63a13"],e.allowedCharts={discrimination:[ROC_CHART.type,DISCRIMINATION_CHART.type,KS_CHART.type,LIFT_CHART.type],calibration:[CALIBRATION_CHART.type],fprAndPA:[PRECISION_CHART.type,OGIVE_CHART.type,PROB_LEVELS.type,CONFUSION_MATRIX.type]},e.opts={data:{type:"line"},axis:{y:{max:1,min:0,padding:{top:0,bottom:0},tick:{values:[0,.2,.4,.6,.8,1],count:6,outer:!0},label:{position:"outer-right"}},x:{min:0,max:1,tick:{values:[0,.2,.4,.6,.8,1],count:6,outer:!0},label:{position:"outer-right"}}},point:{show:!1},legend:{show:!0,color:"#ffffff"},transition:{duration:100}},e}(CHART||{});function setExpiration(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toGMTString()}function setCookie(e,t,a,n,r,o){cookieStr=e+"="+escape(t)+"; ",a&&(a=setExpiration(a),cookieStr+="expires="+a+"; "),n&&(cookieStr+="path="+n+"; "),r&&(cookieStr+="domain="+r+"; "),o&&(cookieStr+="secure; "),document.cookie=cookieStr}function readCookie(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(let a=0;a<this.length;a++)e.call(t,this[a],a,this)});var qs=document.querySelector.bind(document),qsa=document.querySelectorAll.bind(document);Element.prototype.qs||(Element.prototype.qs=function(){return this.querySelector.apply(this,arguments)},Element.prototype.qsa=function(){return this.querySelectorAll.apply(this,arguments)});var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("test",null,opts)}catch(e){}function createNode(e){var t=document.createElement("div");return t.innerHTML=e,0===t.children.length?null:1===t.children.length?t.children[0]:t.children}function children(e,t){var a=e.qsa(t),n=[];if(a)for(i in a){var r=a[i];r.parentNode===e&&n.push(r)}return n}function createNode(e){var t=document.createElement("div");return t.innerHTML=e,0===t.children.length?null:1===t.children.length?t.children[0]:t.children}function debounce(e,t,a){var n;return function(){var r=this,o=arguments,s=a&&!n;clearTimeout(n),n=setTimeout(function(){n=null,a||e.apply(r,o)},t),s&&e.apply(r,o)}}function extend(e,t){for(var a in t){var n=t[a];n&&"[object Object]"===Object.prototype.toString.call(n)?(e[a]=e[a]||{},extend(e[a],n)):e[a]=n}return e}function isDnDAvailable(){var e=qs("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null}),Element.prototype.attrs||(Element.prototype.attrs=function(e){if(e&&"array"!==(typeof e).toLowerCase()&&"string"!==(typeof e).toLowerCase())throw new Error("Argument should be array of attributes or a string of space/comma delimited attributes.");"string"==typeof(e=Array.from(this.attributes))&&(e=e.replace(/[\s]+,[\s]*|,[\s]*|[\s]+/g,",").split(","));var t={};return e.forEach(e=>{e instanceof Attr?t[e.name]=e.value:"string"==typeof e&&(t[e]=this.getAttribute(e))}),t}),Element.prototype.toggleClass||(Element.prototype.toggleClass=function(e){if("array"!==(typeof e).toLowerCase()&&"string"!==(typeof e).toLowerCase())throw new Error("Argument should be array of classes or a string of space/comma delimited classes.");return"string"==typeof e&&(e=e.replace(/[\s]+,[\s]*|,[\s]*|[\s]+/g,",").split(",")),e.forEach(e=>{this.classList.toggle(e)}),this}),Element.prototype.addClass||(Element.prototype.addClass=function(e){if("array"!==(typeof e).toLowerCase()&&"string"!==(typeof e).toLowerCase())throw new Error("Argument should be array of classes or a string of space/comma delimited classes.");return"string"==typeof e&&(e=e.replace(/[\s]+,[\s]*|,[\s]*|[\s]+/g,",").split(",")),e.forEach(e=>{this.classList.add(e)}),this}),Element.prototype.removeClass||(Element.prototype.removeClass=function(e){if("array"!==(typeof e).toLowerCase()&&"string"!==(typeof e).toLowerCase())throw new Error("Argument should be array of classes or a string of space/comma delimited classes.");return"string"==typeof e&&(e=e.replace(/[\s]+,[\s]*|,[\s]*|[\s]+/g,",").split(",")),e.forEach(e=>{this.classList.remove(e)}),this}),Element.prototype.hasClass||(Element.prototype.hasClass=function(e){if("string"!==(typeof e).toLowerCase())throw new Error("Argument should be a string classname.");let t=e.replace(/[\s]+,[\s]*|,[\s]*|[\s]+/g,",").split(",");if(1==t.length)return this.classList.contains(e);for(let e=0;e<t.length;e++)if(this.classList.contains(t[e]))return!0;return!1}),Element.prototype.fireCustomEvent||(Element.prototype.fireCustomEvent=function(e,t){var a;void 0!==t&&t||(t={}),t.target=this;var n={detail:t};try{a=new CustomEvent(e,n)}catch(n){(a=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t)}this.dispatchEvent(a)});var tableToExcel=function(e,t){e.nodeType||(e=document.getElementById(e));var a,n={worksheet:t||"Worksheet",table:e.innerHTML};window.location.href="data:application/vnd.ms-excel;base64,"+function(e){return window.btoa(unescape(encodeURIComponent(e)))}((a=n,'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><table>{table}</table></body></html>'.replace(/{(\w+)}/g,function(e,t){return a[t]})))};!function(e,t){"use strict";if(!e.setImmediate){var a,n,r,o,s,i=1,l={},d=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?a=function(e){process.nextTick(function(){f(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){f(e.data)},a=function(e){r.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,a=function(e){var t=c.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):a=function(e){setTimeout(f,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&f(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),a=function(t){e.postMessage(o+t,"*")}),u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[i]=r,a(i),i++},u.clearImmediate=p}function p(e){delete l[e]}function f(e){if(d)setTimeout(f,0,e);else{var a=l[e];if(a){d=!0;try{!function(e){var a=e.callback,n=e.args;switch(n.length){case 0:a();break;case 1:a(n[0]);break;case 2:a(n[0],n[1]);break;case 3:a(n[0],n[1],n[2]);break;default:a.apply(t,n)}}(a)}finally{p(e),d=!1}}}}}("undefined"==typeof self?"undefined"==typeof global?this:global:self),function(){var e=window.CustomEvent;function t(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function a(e){e&&e.blur&&e!==document.body&&e.blur()}function n(e,t){for(var a=0;a<e.length;++a)if(e[a]===t)return!0;return!1}function r(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function o(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,a=!1,n=function(){a?this.downgradeModal():this.maybeHideModal(),a=!1}.bind(this),r=function(r){if(r.target===e){var o="DOMNodeRemoved";a|=r.type.substr(0,o.length)===o,window.clearTimeout(t),t=window.setTimeout(n,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,r)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(e,t){t=t||{};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),a}).prototype=window.Event.prototype),o.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var a=document.createEvent("MouseEvents");a.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(a),e.stopPropagation()},focus_:function(){var e=this.dialog_.qs("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.qs(t.join(", "))}a(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),a=function(e,a){return!(void 0===t[e]||t[e]===a)};if(t.opacity<1||a("zIndex","auto")||a("transform","none")||a("mixBlendMode","normal")||a("filter","none")||a("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var a=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(a)}};var s={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,a=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,a)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var a=document.styleSheets[t],r=null;try{r=a.cssRules}catch(e){}if(r)for(var o=0;o<r.length;++o){var s=r[o],i=null;try{i=qsa(s.selectorText)}catch(e){}if(i&&n(i,e)){var l=s.style.getPropertyValue("top"),d=s.style.getPropertyValue("bottom");if(l&&"auto"!==l||d&&"auto"!==d)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!s.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new o(e)},registerDialog:function(e){e.showModal||s.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var a=[];t.forEach(function(e){for(var t,n=0;t=e.removedNodes[n];++n)t instanceof Element&&("dialog"===t.localName&&a.push(t),a=a.concat(t.qsa("dialog")))}),a.length&&e(a)}))}};if(s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,a=0;e=this.pendingDialogStack[a];++a)e.updateZIndex(--t,--t),0===a&&(this.overlay.style.zIndex=--t);var n=this.pendingDialogStack[0];n?(n.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=t(e);){for(var a,n=0;a=this.pendingDialogStack[n];++n)if(a.dialog===e)return 0===n;e=e.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),a(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var a=new e("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&n.dialog.dispatchEvent(a)&&n.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},s.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()})},s.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},s.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var i=document.createElement("form");if(i.setAttribute("method","dialog"),"dialog"!==i.method){var l=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(l){var d=l.get;l.get=function(){return r(this)?"dialog":d.call(this)};var c=l.set;l.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):c.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",l)}}document.addEventListener("click",function(e){if(s.formSubmitter=null,s.useValue=null,!e.defaultPrevented){var a=e.target;if(a&&r(a.form)){if(!("submit"===a.type&&["button","input"].indexOf(a.localName)>-1)){if("input"!==a.localName||"image"!==a.type)return;s.useValue=e.offsetX+","+e.offsetY}t(a)&&(s.formSubmitter=a)}}},!1);var u=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!r(this))return u.call(this);var e=t(this);e&&e.close()},document.addEventListener("submit",function(e){var a=e.target;if(r(a)){e.preventDefault();var n=t(a);if(n){var o=s.formSubmitter;o&&o.form===a?n.close(s.useValue||o.value):n.close(),s.formSubmitter=null}}},!0)}s.forceRegisterDialog=s.forceRegisterDialog,s.registerDialog=s.registerDialog,"function"==typeof define&&"amd"in define?define(function(){return s}):"object"==typeof module&&"object"==typeof module.exports?module.exports=s:window.dialogPolyfill=s}();var MediaState=function(){this.device=null,this.orientation=null;var e=this;window.addEventListener("orientationchange",function(){e.detect()}),window.addEventListener("resize",debounce(function(){e.detect()},250),!!supportsPassive&&{passive:!0}),this.detect()};function fixTable(e){var t,a=e.querySelector("thead"),n=e.querySelector("tbody");function r(){var e=[].slice.call(a.querySelectorAll("th")),t=[].slice.call(n.querySelectorAll("tr"));n.setAttribute("style",""),a.style.width="",a.style.position="",a.style.top="",a.style.left="",a.style.zIndex="",e.forEach(function(e){e.style.display="",e.style.width="",e.style.position="",e.style.top="",e.style.left=""}),t.forEach(function(e){e.setAttribute("style","")}),[].slice.call(n.querySelectorAll("td")).forEach(function(e){e.style.width="",e.style.position="",e.style.left=""});var r=e.map(function(e){var t=e.getBoundingClientRect(),a=document.defaultView.getComputedStyle(e,"");return{boundingWidth:t.width,boundingHeight:t.height,width:parseInt(a.width,10),paddingLeft:parseInt(a.paddingLeft,10)}}),o=r.reduce(function(e,t){return e+t.boundingWidth},0);n.style.display="block",n.style.width=o+"px",a.style.width=o-r[0].boundingWidth+"px",a.style.position="absolute",a.style.top="0",a.style.left=r[0].boundingWidth+"px",a.style.zIndex=10,e.forEach(function(e,t){e.style.width=r[t].width+"px",0===t&&(e.style.position="absolute",e.style.top="0",e.style.left=-r[0].boundingWidth+"px")}),n.style.marginTop=r[0].boundingHeight+"px",t.forEach(function(e,t){e.style.display="block",e.style.paddingLeft=r[0].boundingWidth+"px",[].slice.call(e.querySelectorAll("td")).forEach(function(e,t){e.style.width=r[t].width+"px",0===t&&(e.style.position="absolute",e.style.left="0")})})}return e.style.overflow="auto",e.style.position="relative",r(),window.addEventListener("resize",function(){t||(t=setTimeout(function(){t=null,r()},500))},!1),e.addEventListener("scroll",function(){a.style.transform="translate3d(0,"+this.scrollTop+"px,0)";var e="translate3d("+this.scrollLeft+"px,0,0)";a.querySelector("th").style.transform=e,[].slice.call(n.querySelectorAll("tr > td:first-child")).forEach(function(t,a){t.style.transform=e})}),{relayout:r}}MediaState.prototype.equals=function(e){return null!=e&&void 0!==e&&this.device===e.device&&this.orientation===e.orientation},MediaState.prototype.fireChange=function(){document.body.fireCustomEvent("mediaChanged")},MediaState.prototype.assign=function(e){this.device=e.device,this.orientation=e.orientation,this.fireChange()},MediaState.prototype.detect=function(){var e=window.matchMedia("(max-width: 500px)"),t=window.matchMedia("(min-width: 501px) and (max-width: 768px)"),a=window.matchMedia("(min-width: 769px) and (max-width: 1366px)"),n=window.matchMedia("(min-width: 1367px)"),r=window.matchMedia("(orientation: portrait"),o=!1;e.matches&&(this.device="mobile",o=!0),t.matches&&(this.device="tablet",o=!0),a.matches&&(this.device="laptop",o=!0),n.matches&&(this.device="desktop",o=!0),r.matches?"portrait"!=this.orientation&&(this.orientation="portrait",o=!0):"landscape"!=this.orientation&&(this.orientation="landscape",o=!0),o&&this.fireChange()},function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Navigo=t()}(this,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function t(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function a(e,a,n){this.root=null,this._routes=[],this._useHash=a,this._hash=void 0===n?"#":n,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!a&&t(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",e?this.root=a?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):a&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function n(e){return e instanceof RegExp?e:e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function r(e){return e.replace(/\/$/,"").split("/").length}function o(e,t){return r(t)-r(e)}function s(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(t){var r=function(e){var t=[];return{regexp:e instanceof RegExp?e:new RegExp(e.replace(a.PARAMETER_REGEXP,function(e,n,r){return t.push(r),a.REPLACE_VARIABLE_REGEXP}).replace(a.WILDCARD_REGEXP,a.REPLACE_WILDCARD)+a.FOLLOWED_BY_SLASH_REGEXP,a.MATCH_REGEXP_FLAGS),paramNames:t}}(n(t.route)),o=r.regexp,s=r.paramNames,i=e.replace(/^\/+/,"/").match(o),l=function(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce(function(e,a,n){return null===e&&(e={}),e[t[n]]=decodeURIComponent(a),e},null):null}(i,s);return!!i&&{match:i,route:t,params:l}}).filter(function(e){return e})}function i(e,t){return s(e,t)[0]||!1}function l(e,t){var a=t.map(function(t){return""===t.route||"*"===t.route?e:e.split(new RegExp(t.route+"($|/)"))[0]}),r=n(e);return a.length>1?a.reduce(function(e,t){return e.length>t.length&&(e=t),e},a[0]):1===a.length?a[0]:r}function d(e,a,n){var r,o=function(e){return e.split(/\?(.*)?$/)[0]};return void 0===n&&(n="#"),t()&&!a?o(e).split(n)[0]:(r=e.split(n)).length>1?o(r[1]):o(r[0])}function c(t,a,n){if(a&&"object"===(void 0===a?"undefined":e(a))){if(a.before)return void a.before(function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(t(),a.after&&a.after(n))},n);if(a.after)return t(),void(a.after&&a.after(n))}t()}return a.prototype={helpers:{match:i,root:l,clean:n,getOnlyURL:d},navigate:function(e,t){var a;return e=e||"",this._usePushState?(a=(a=(t?"":this._getRoot()+"/")+e.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",a),this.resolve()):"undefined"!=typeof window&&(e=e.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e),this},on:function(){for(var t=this,a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];if("function"==typeof n[0])this._defaultHandler={handler:n[0],hooks:n[1]};else if(n.length>=2)if("/"===n[0]){var s=n[1];"object"===e(n[1])&&(s=n[1].uses),this._defaultHandler={handler:s,hooks:n[2]}}else this._add(n[0],n[1],n[2]);else if("object"===e(n[0])){Object.keys(n[0]).sort(o).forEach(function(e){t.on(e,n[0][e])})}return this},off:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce(function(t,a){return a.handler!==e&&t.push(a),t},[]),this},notFound:function(e,t){return this._notFoundHandler={handler:e,hooks:t},this},resolve:function(e){var a,n,r=this,o=(e||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(o=o.replace(new RegExp("^/"+this._hash),"/"));var s=function(e){return e.split(/\?(.*)?$/).slice(1).join("")}(e||this._cLoc()),l=d(o,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&l===this._lastRouteResolved.url&&s===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(n=i(l,this._routes))?(this._callLeave(),this._lastRouteResolved={url:l,query:s,hooks:n.route.hooks,params:n.params,name:n.route.name},a=n.route.handler,c(function(){c(function(){n.route.route instanceof RegExp?a.apply(void 0,n.match.slice(1,n.match.length)):a(n.params,s)},n.route.hooks,n.params,r._genericHooks)},this._genericHooks,n.params),n):this._defaultHandler&&(""===l||"/"===l||l===this._hash||function(e,a,n){if(t()&&!a)return!1;if(!e.match(n))return!1;var r=e.split(n);return r.length<2||""===r[1]}(l,this._useHash,this._hash))?(c(function(){c(function(){r._callLeave(),r._lastRouteResolved={url:l,query:s,hooks:r._defaultHandler.hooks},r._defaultHandler.handler(s)},r._defaultHandler.hooks)},this._genericHooks),!0):(this._notFoundHandler&&c(function(){c(function(){r._callLeave(),r._lastRouteResolved={url:l,query:s,hooks:r._notFoundHandler.hooks},r._notFoundHandler.handler(s)},r._notFoundHandler.hooks)},this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var e=this;"undefined"!=typeof document&&this._findLinks().forEach(function(t){t.hasListenerAttached||(t.addEventListener("click",function(a){if((a.ctrlKey||a.metaKey)&&"a"==a.target.tagName.toLowerCase())return!1;var n=e.getLinkPath(t);e._destroyed||(a.preventDefault(),e.navigate(n.replace(/\/+$/,"").replace(/^\/+/,"/")))}),t.hasListenerAttached=!0)})},generate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this._routes.reduce(function(a,n){var r;if(n.name===e)for(r in a=n.route,t)a=a.toString().replace(":"+r,t[r]);return a},"");return this._useHash?this._hash+a:a},link:function(e){return this._getRoot()+e},pause:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,this._historyAPIUpdateMethod=e?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(e){return void 0===e?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=e,e)},disableIfAPINotAvailable:function(){t()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(e){return e.getAttribute("href")},hooks:function(e){this._genericHooks=e},_add:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof t&&(t=encodeURI(t)),this._routes.push("object"===(void 0===a?"undefined":e(a))?{route:t,handler:a.uses,name:a.as,hooks:n||a.hooks}:{route:t,handler:a,hooks:n}),this._add},_getRoot:function(){return null!==this.root?this.root:(this.root=l(this._cLoc().split("?")[0],this._routes),this.root)},_listen:function(){var e=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!=typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var t=this._cLoc(),a=void 0,n=void 0;(n=function(){a=e._cLoc(),t!==a&&(t=a,e.resolve()),e._listeningInterval=setTimeout(n,200)})()}},_cLoc:function(){return"undefined"!=typeof window?void 0!==window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:n(window.location.href):""},_findLinks:function(){return[].slice.call(qsa("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var e=this._lastRouteResolved;e&&e.hooks&&e.hooks.leave&&e.hooks.leave(e.params)}},a.PARAMETER_REGEXP=/([:*])(\w+)/g,a.WILDCARD_REGEXP=/\*/g,a.REPLACE_VARIABLE_REGEXP="([^/]+)",a.REPLACE_WILDCARD="(?:.*)",a.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",a.MATCH_REGEXP_FLAGS="",a});var COMPACT_LABEL=function(e){e.registerCompactLabel=function(e){e&&void 0!==e||(e=qsa("label.compact")),void 0!==e.tagName&&(e=[e]),e.forEach(e=>{var n=e.qs("input,textarea,select");n&&void 0!==n&&(n.addEventListener("change",a),n.addEventListener("keyup",a),a({currentTarget:n}),t.observe(n,{childList:!0}))})};var t=new MutationObserver(e=>{for(var t of e)"childList"==t.type&&a({currentTarget:t.target})}),a=function(e){e.currentTarget.value&&e.currentTarget.value.length>0?(e.currentTarget.setAttribute("not-empty","true"),e.currentTarget.closest("label").setAttribute("not-empty","true")):(e.currentTarget.removeAttribute("not-empty"),e.currentTarget.closest("label").removeAttribute("not-empty"));let t=e.currentTarget;if(t.getAttribute("pattern")){t.removeClass("invalid");let e=new RegExp(t.getAttribute("pattern"),"g"),a=t.value.trim(),n=e.exec(a);n&&null!=n&&void 0!==n.index&&0===n.index||t.addClass("invalid")}};return e.deregister=function(e){e.removeEventListener("change",a),e.removeEventListener("keyup",a)},e}(COMPACT_LABEL||{}),DIAL=function(e){var t=new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(function(e){e.forEach(function(e){"attributes"==e.type&&"data-value"==e.attributeName&&(e.target.nextElementSibling.qs("span").innerText=e.target.getAttribute("data-value"))})});return e.registerDial=function(e){e&&void 0!==e||(e=qsa("dt.dial")),void 0!==e.tagName&&(e=[e]),[].forEach.call(e,function(e){t.observe(e,{attributes:!0})})},e}(DIAL||{}),CREDENTIALS=function(e){var t=null,a=!1;return loadCreds=function(){return t=readCookie("userHash"),checkCachedCreds()||(t=null),a=!0,t},e.obtainCreds=async function(a,n){return await authenticate({uname:a,password:n}).then(e=>{t=""+e}),null!=t&&setCookie("userHash",t),e.updateLoginLogoutLinks(),t},authenticate=async function(e){const t=SERVER.getBaseAddress()+"login/authenticate";let a=extend({uname:"",password:""},e);if(0===a.uname.length||0===a.password.length)throw new Error(i18n.en.APP.UI.ERROR.INCORRECT_USERNAME_OR_PASSWORD);var n=null,r=null;try{n=useTestData?await CREDENTIALS_DATA.login(t,a):await SERVER.postData(t,a)}catch(e){n=null}try{null!=n&&("success"===n.status||n.status>=200&&n.status<300)&&(r=n.data.posts[0].key)}catch(e){throw console.log(e),new Error(i18n.en.APP.UI.ERROR.INCORRECT_USERNAME_OR_PASSWORD)}if(null==r)throw new Error(i18n.en.APP.UI.ERROR.INCORRECT_USERNAME_OR_PASSWORD);return r},e.getUserCreds=function(){return null!=t||a||(t=loadCreds()),e.updateLoginLogoutLinks(),"string"==typeof t&&(t=parseInt(t,10)),t},e.resetCreds=function(){t=null,setCookie("userHash",""),e.updateLoginLogoutLinks()},checkCachedCreds=function(){return t&&void 0!==t&&t.length>0},e.showLoginDialog=function(e){if(qs("#dialogs-active #login")){qs("#dialogs-active #login").fireCustomEvent("cancelled",{message:"Another dialog triggered."})}APP.nav.qs("#navItem-dashboard-nav-link").addClass("hidden"),APP.nav.qs("#navGroupItem-connection").addClass("hidden"),APP.nav.qs("#navGroupItem-data-engineering").addClass("hidden"),APP.nav.qs("#navGroupItem-ae").addClass("hidden"),APP.nav.qs("#navGroupItem-mp").addClass("hidden");var t=null;return t=createNode(e?loginTemplate({errorMsg:e}):loginTemplate({errorMsg:""})),new Promise((e,a)=>{qs("#dialogs-sleeping").appendChild(t),APP.showDialog(t);let n=a=>{if("keypress"!=a.type.toLowerCase()||"enter"===a.key.toLowerCase()){var n=t.qs("#input-username").value,r=t.qs("#input-password").value;APP.hideDialog(t),t.remove(),e({uname:n,password:r})}};t.qs("#login-button").addEventListener("click",n),t.addEventListener("keypress",n),t.addEventListener("cancelled",e=>{t.remove(),a(`Cancelled. ${e.detail.message}`)})})},e.updateLoginLogoutLinks=function(){null!=t&&void 0!==t?(qs("#navItem-login-nav-link").addClass("hidden"),qs("#navItem-logout-nav-link").removeClass("hidden")):(qs("#navItem-logout-nav-link").addClass("hidden"),qs("#navItem-login-nav-link").removeClass("hidden"))},e}(CREDENTIALS||{});APP=function(e){return e.showNav=function(){const e=qs("#main-nav"),t=qs("#trigger-nav"),a=qs("#page-container");e&&t&&a&&void 0!==e&&void 0!==t&&void 0!==a&&(e.addClass("on"),t.addClass("on"),a.addClass("nav-open"),e.setAttribute("aria-hidden","false"),e.fireCustomEvent("shown"))},e.hideNav=function(){const t=qs("#main-nav"),a=qs("#trigger-nav"),n=qs("#page-container");t&&a&&n&&void 0!==t&&void 0!==a&&void 0!==n&&(e.unpinNav(),t.removeClass("on"),a.removeClass("on"),n.removeClass("nav-open"),t.setAttribute("aria-hidden","true"),t.fireCustomEvent("hidden"))},e.pinNav=function(){const t=qs("#main-nav"),a=qs("#pin-nav"),n=qs("#page-container");t&&a&&n&&void 0!==t&&void 0!==a&&void 0!==n&&(t.hasClass("on")||e.showNav(),t.addClass("pinned"),a.addClass("on"),n.addClass("nav-pinned"),t.fireCustomEvent("pinned"))},e.unpinNav=function(){const e=qs("#main-nav"),t=qs("#pin-nav"),a=qs("#page-container");e&&t&&a&&void 0!==e&&void 0!==t&&void 0!==a&&(e.removeClass("pinned"),t.removeClass("on"),a.removeClass("nav-pinned"),e.fireCustomEvent("unpinned"))},e.showMask=function(e){if(!e||void 0===e)return;const t=qs("#mask");t.hasClass("on")||t.addClass("on"),void 0!==t.dataset.maskUsers&&null!=t.dataset.maskUsers||(t.dataset.maskUsers="");let a=t.dataset.maskUsers.split(",");a.indexOf(e)<0&&(a.push(e),a=a.filter(e=>e.length>0),t.addClass(e)),t.dataset.maskUsers=a.filter(e=>e.length>0).join(",")},e.hideMask=function(t){const a=qs("#mask");void 0!==a.dataset.maskUsers&&null!=a.dataset.maskUsers||(a.dataset.maskUsers="");let n=a.dataset.maskUsers.split(",");t&&void 0!==t?n.indexOf(t)>=0&&(a.removeClass(t),delete n[n.indexOf(t)],0===(n=n.filter(e=>e.length>0)).length&&a.removeClass("on"),a.dataset.maskUsers=n.join(",")):n.forEach(t=>e.hideMask(t))},e.showDialog=function(t){const a=qs("#dialogs-active");t&&mask&&a&&void 0!==t&&"undefined"!=typeof mask&&void 0!==a&&(e.showMask("dialog"),a.appendChild(t),a.addClass("on"),a.setAttribute("current-dialog",t.id),t.show&&t.show())},e.hideDialog=function(t){const a=qs("#dialogs-sleeping"),n=qs("#dialogs-active");if(t&&mask&&a&&n&&void 0!==t&&"undefined"!=typeof mask&&void 0!==a&&void 0!==n)return e.hideMask("dialog"),n.removeClass("on"),n.removeAttribute("current-dialog"),a.appendChild(t),t.hide&&t.hide(),t},e.showCriticalError=function(e){showGlobalMessage(e,"critical")},e.showError=function(e){showGlobalMessage(e,"error")},e.showInfo=function(e){showGlobalMessage(e,"info")},e.showWarning=function(e){showGlobalMessage(e,"warning")},showGlobalMessage=function(e,t){const a=qs("#messageBar");e&&a&&void 0!==e&&void 0!==a&&(a.removeClass("critical,error,warning,info"),a.addClass(t),a.qs(".content").innerHTML=e)},e.dismissMessage=function(){const e=qs("#messageBar");e&&void 0!==e&&(e.removeClass("critical,error,warning,info"),e.qs(".content").innerHTML="")},e.setProgress=function(t,a){null!=a&&void 0!==a||(a=!0),a&&e.showMask("progress"),qs("#footer #progress-message").innerText=t,qs("#footer #progress").addClass("on")},e.resetProgress=function(){e.hideMask("progress"),qs("#footer #progress-message").innerText="",qs("#footer #progress").removeClass("on")},e.resetCurrentPageMarker=function(){qs("#main-content").removeAttribute("current-page-marker")},e.setCurrentPageMarker=function(t){t&&void 0!==t||(t=e.getCurrentPageMarkerString()),qs("#main-content").setAttribute("current-page-marker",t)},e.getCurrentPageMarkerString=function(){if(!e.getCurrentPageLinkNode()){if(STORE.here.includes("/new-project"))return"new-project";if(STORE.here.includes("/workflow-start"))return"workflow-start"}let t=e.getCurrentPageLinkNode().getAttribute("to").replace(/\//g,"_");return t.startsWith("_")&&(t=t.slice(1)),0==t.length&&(t="dashboard"),t},e.getCurrentPageLinkNode=function(){let e=qs("#main-nav"),t=null,a=e.innerHTML.match(/to="([\/\w\d\-]*)"/g).map(e=>e.split('"')[1]).slice(1);if("/"==STORE.here)t=e.qs("#dashboard-nav-link");else for(let n=a.length-1;n>=0;n--)if(STORE.here.startsWith(a[n])){t=e.qs(`[to^='${a[n]}']`);break}return t},e.getCurrentPageEndToken=function(){let t=e.getCurrentPageLinkNode();if(t){let e=t.getAttribute("to");return(e=e.split("/"))[e.length-1]}return""},e.noop=function(){},e}(APP||{}),APP=function(e){var t=function(e){const t=qs("#main-nav");if("trigger-nav"===e.currentTarget.id)t.hasClass("on")?APP.hideNav():APP.showNav();else if("close-nav"===e.currentTarget.id){if(qs("#main-nav").hasClass("pinned"))return;APP.hideNav()}else if("pin-nav"===e.currentTarget.id){const e=qs("#main-nav");e&&void 0!==e&&(e.hasClass("pinned")?APP.unpinNav():APP.pinNav())}},a=function(e){qs("#page-container").hasClass("nav-open")&&APP.hideNav()},n=function(e){setCookie("navPinned",e.type)};e.navigationUpdater=function(){let e=qs("#main-nav");e.qsa(".selected").forEach(e=>e.removeClass("selected"));let t=null,a=e.innerHTML.match(/to="([\/\w\d\-]*)"/g).map(e=>e.split('"')[1]).slice(1);if("/"==STORE.here)t=e.qs("#dashboard-nav-link");else for(let n=a.length-1;n>=0;n--)if(STORE.here.startsWith(a[n])){t=e.qs(`[to^='${a[n]}']`);break}if(t){t.addClass("selected");let e=t.closest(".nav-group-container.l1");e&&children(e,".group-text").forEach(e=>e.addClass("selected")),(e=t.closest(".nav-group-container.l2"))&&children(e,".group-text").forEach(e=>e.addClass("selected"))}};var r=function(e){APP.router.navigate("/new-project")};return e.registerUIListeners=function(){[].forEach.call(qsa(".nav-control"),function(e){e.addEventListener("click",t)}),qs("#mask").addEventListener("click",a),qs("#main-nav").addEventListener("pinned",n),qs("#main-nav").addEventListener("unpinned",n),qs("#createProject").addEventListener("click",r),qs("#messageBar .close").addEventListener("click",APP.dismissMessage),new MutationObserver(e=>{for(var t of e)if("childList"==t.type)for(var a of t.addedNodes)COMPACT_LABEL.registerCompactLabel(a.qsa("label.compact"))}).observe(qs("#dialogs-active"),{attributes:!1,childList:!0})},e}(APP||{});var SERVER=function(e){return baseAddress=window.server&&"undefined"!=typeof server?server:"http://35.187.237.235:9000/automl/v1/apis/",e.getBaseAddress=function(){return baseAddress},e.postData=function(e,t){return fetch(window.proxy,{body:JSON.stringify(t),cache:"no-cache",credentials:"omit",headers:{"content-type":"application/json","X-Proxy-URL":e},method:"POST",redirect:"follow",referrer:"no-referrer"}).then(e=>e.json())},e.getData=function(e,t){var a=new URL(e);return Object.keys(t).forEach(e=>a.searchParams.append(e,t[e])),fetch(a,{cache:"no-cache",credentials:"omit",headers:{"content-type":"application/json"},method:"GET",redirect:"follow",referrer:"no-referrer"}).then(e=>e.json())},e}(SERVER||{}),STORE=function(e){var t={},a=0;e.addObserver=function(e,n){return t[e]&&"undefined"!=t[e]||(t[e]={}),t[e][""+a]=n,++a-1},e.removeObserver=function(e,a){return t[e]&&"undefined"!=t[e]&&t[e][a]&&"undefined"!=t[e][a]?(f=t[e][a],delete t[e][a],f):null};var n=null;return Object.defineProperty(e,"projects",{get:function(){return n},set:function(e){if(n=e,t.projects&&void 0!==t.projects)for(var a in t.projects)t.projects[a](e)}}),Object.defineProperty(e,"here",{get:function(){var e=window.location.hash;return e.startsWith("#/")?e=e.substr(2):e.startsWith("#")&&(e=e.substr(1)),""===e&&(e="/"),e.startsWith("/")?e:"/"+e}}),e._projectStuff={},e.setProjectData=function(t,a,n){return Object.keys(e._projectStuff).includes(t)||(e._projectStuff[t]={},e._projectStuff[t].data={},e._projectStuff[t].metadata={}),e._projectStuff[t].data[a]=n,n},e.setProjectMetadata=function(t,a,n){Object.keys(e._projectStuff).includes(t)||(e._projectStuff[t]={},e._projectStuff[t].data={},e._projectStuff[t].metadata={}),e._projectStuff[t].metadata[a]=n},e.getProjectData=function(t,a){return!!Object.keys(e._projectStuff).includes(t)&&(!!Object.keys(e._projectStuff[t].data).includes(a)&&e._projectStuff[t].data[a])},e.getProjectMetadata=function(t,a){return!!Object.keys(e._projectStuff).includes(t)&&(!!Object.keys(e._projectStuff[t].metadata).includes(a)&&e._projectStuff[t].metadata[a])},e.purge=function(){e._projectStuff={}},e}(STORE||{}),DASHBOARD=function(e,t){e.projects=null;var a=null;e.load=async function(){PROJECT.cleanUp(),n();let e=null,t=null;try{t=await getAllProjects().then(t=>{e=t})}catch(e){return console.log(e),void APP.router.navigate("/logout")}var a={projectkey:"##ID##",createdOn:"##CREATED_ON##",pname:"##pname##",NoModels:"##NoModels##",platform:"##platform##",ptype:"##ptype##"},r=[];e.forEach(e=>r.push(extend(a,e))),STORE.projects=e},e.unload=function(){e.inited&&(STORE.removeObserver("projects",a),a=null,e.inited=!1,qs("#main-content").classList.remove("dashboard"),qs("#main-content .dashboardContent").innerHTML="")},e.renderProjects=function(e){qs("#main-content .dashboardContent").innerHTML="",e.forEach(e=>{let t=createNode(projectTemplate(e));qs("#main-content .dashboardContent").appendChild(t),t.qs("button.exploreProject").addEventListener("click",e=>{APP.router.navigate(e.currentTarget.getAttribute("target"))})});APP.nav.qs("#navItem-dashboard-nav-link").removeClass("hidden")};var n=function(){qs("#main-content").classList.add("dashboard"),a=STORE.addObserver("projects",e.renderProjects),e.inited=!0};return getAllProjects=async function(){let e=SERVER.getBaseAddress()+"projects/all",t=CREDENTIALS.getUserCreds();if(APP.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.GET_ALL_PROJECTS),null==t)throw new Error(i18n.en.APP.UI.ERROR.USER_NOT_LOGGED_IN_CANNOT_RETRIEVE_PROJECTS);let a={key:t};var n=null,r=null;try{n=useTestData?await DASHBOARD_DATA.getData(e,a):await SERVER.postData(e,a),APP.resetProgress()}catch(e){n=null,APP.resetProgress()}try{null!=n&&("success"===n.status||n.status>=200&&n.status<300)&&(r=n.data.posts)}catch(e){throw console.log(e),new Error(i18n.en.APP.UI.ERROR.PROJECT_RETRIEVAL)}if(null==r)throw new Error(i18n.en.APP.UI.ERROR.PROJECT_RETRIEVAL);return r},e.workflowStart=function(t){e.unload(),APP.showInfo("DB connection created successfully."),t=t||PROJECT.currentProjectKey(),workflowStartAction=function(){qs("#main-content .workflow-start button#workflow-start").removeEventListener("click",workflowStartAction),!0===STORE.getProjectMetadata(t,VALIDATE_FEATURES.STORE_KEY+"_features_saved")?APP.router.navigate(`/explore-data/${t}`):APP.router.navigate(`/validate-features/${t}`)},qs("#main-content .workflow-start button#workflow-start").addEventListener("click",workflowStartAction)},e}(DASHBOARD||{},APP);APP=function(e){e.router=new Navigo(null,!0),e.nav=qs("#main-nav"),e.initRoutes=function(){e.router.on("/",function(){creds=CREDENTIALS.getUserCreds(),null==creds?e.router.navigate("/login"):DASHBOARD.load()}),e.router.on("/login",async function(){let t=null,a=null,n=!1;for(;null==a;){try{t=await CREDENTIALS.showLoginDialog(n?i18n.en.APP.UI.ERROR.INCORRECT_USERNAME_OR_PASSWORD:"")}catch(e){return void console.log(e)}e.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.LOGIN);try{a=await CREDENTIALS.obtainCreds(t.uname,t.password),console.log(a)}catch(t){console.log(t),e.resetProgress(),n=!0,APP.showError(i18n.en.APP.UI.ERROR.INCORRECT_USERNAME_OR_PASSWORD)}}e.router.navigate("/")}),e.router.on("/logout",function(){CREDENTIALS.resetCreds(),DASHBOARD.unload(),e.router.navigate("/")}),e.router.on("/new-project",PROJECT.createProject),e.router.on("/db-connection/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),FILE_UPLOAD.hideDialog(),DB_CONNECTION.dbConnection(t)}).on("/db-connection",function(){APP.router.navigate(`/db-connection/${PROJECT.currentProjectKey()}`)}),e.router.on("/file-upload/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),DB_CONNECTION.hideDialog(),FILE_UPLOAD.fileUpload(t)}).on("/file-upload",function(){APP.router.navigate(`/file-upload/${PROJECT.currentProjectKey()}`)}),e.router.on("/validate-features/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),VALIDATE_FEATURES.validateFeatures(t)}).on("/validate-features",function(){APP.router.navigate(`/validate-features/${PROJECT.currentProjectKey()}`)}),e.router.on("/explore-data/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),EXPLORE_DATA.exploreData(t)}).on("/explore-data",function(){APP.router.navigate(`/explore-data/${PROJECT.currentProjectKey()}`)}),e.router.on("/workflow-start/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),DASHBOARD.workflowStart(t)}).on("/workflow-start",function(){APP.router.navigate(`/workflow-start/${PROJECT.currentProjectKey()}`)}),e.router.on("/ae-automodel/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),STORE.getProjectMetadata(PROJECT.currentProjectKey(),AE_AUTOMODEL.STORE_KEY+"_modeldev_complete")?APP.router.navigate(`/mp/mll/discrimination/${t}`):AE_AUTOMODEL.showAutoModel(t)}).on("/ae-automodel",function(){APP.router.navigate(`/ae-automodel/${PROJECT.currentProjectKey()}`)}),e.router.on("/mp/mll/:subnav/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey();let a=e.subnav;ML_LEADERBOARD.show(a,t),console.log(a)}).on("/mp",function(){APP.router.navigate(`/mp/mll/discrimination/${PROJECT.currentProjectKey()}`)}).on("/mp/mll",function(){APP.router.navigate(`/mp/mll/discrimination/${PROJECT.currentProjectKey()}`)}).on("/mp/mll/:subnav",function(e){APP.router.navigate(`/mp/mll/${e.subnav}/${PROJECT.currentProjectKey()}`)}),e.router.on("mp/model-comparison/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),MP_MODEL_COMPARISON.show(t)}).on("/mp/model-comparison",function(){APP.router.navigate(`/mp/model-comparison/${PROJECT.currentProjectKey()}`)}),e.router.on("/md/auto-code/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),AUTO_CODE.show(t)}).on("/md/auto-code",function(){APP.router.navigate(`/md/auto-code/${PROJECT.currentProjectKey()}`)}),e.router.on("/md/score-models/:pkey",function(e){let t=e.pkey;t?PROJECT.setCurrentProjectKey(t):t=PROJECT.currentProjectKey(),SCORE_MODELS.show(t)}).on("/md/score-models",function(){APP.router.navigate(`/md/score-models/${PROJECT.currentProjectKey()}`)}),e.router.hooks({before:function(t,a){e.resetProgress(),qs("#main-nav").hasClass("pinned")||e.hideNav(),t()},after:function(t){e.setCurrentPageMarker(),e.navigationUpdater(),e.updateNavigationVisibility(),e.dismissMessage();let a=qs("#main-nav a.selected");a&&!a.id.includes("ae-automodel")&&AE_AUTOMODEL.unload(),a&&!a.id.includes("mp-mll")&&ML_LEADERBOARD.unload(),a&&!a.id.includes("score-models")&&SCORE_MODELS.cancelPolling()},leave:e.resetCurrentPageMarker})},e.updateNavigationVisibility=function(){let t=e.getCurrentPageMarkerString(),a=(e.getCurrentPageLinkNode(),qs("#main-nav"));a.qsa(".disabled").forEach(e=>e.removeClass("disabled")),a.qsa("#navItem-dashboard-nav-link, #navGroupItem-connection, #navGroupItem-data-engineering, #navItem-explore-data-nav-link, #navGroupItem-ae, #navGroupItem-mp, #navGroupItem-md, #navItem-auto-code-nav-link, #navItem-score-models-nav-link").forEach(e=>e.addClass("hidden")),t.includes("dashboard")?a.qsa("#navItem-dashboard-nav-link").forEach(e=>e.removeClass("hidden")):t.includes("connection")||t.includes("upload")?a.qsa("#navItem-dashboard-nav-link, #navGroupItem-connection").forEach(e=>e.removeClass("hidden")):t.includes("validate-features")||t.includes("workflow-start")?a.qsa("#navItem-dashboard-nav-link, #navGroupItem-connection, #navGroupItem-data-engineering").forEach(e=>e.removeClass("hidden")):t.includes("explore-data")?(a.qsa("#navItem-dashboard-nav-link, #navGroupItem-connection, #navGroupItem-data-engineering, #navItem-explore-data-nav-link, #navGroupItem-ae").forEach(e=>e.removeClass("hidden")),a.qs("#navItem-db-connection-nav-link").addClass("disabled"),a.qs("#navItem-file-upload-nav-link").addClass("disabled"),a.qs("#navItem-validate-features-nav-link").addClass("disabled")):t.includes("ae")?(a.qsa("#navItem-dashboard-nav-link, #navGroupItem-connection, #navGroupItem-data-engineering, #navItem-explore-data-nav-link, #navGroupItem-ae").forEach(e=>e.removeClass("hidden")),a.qs("#navItem-db-connection-nav-link").addClass("disabled"),a.qs("#navItem-file-upload-nav-link").addClass("disabled"),a.qs("#navItem-validate-features-nav-link").addClass("disabled"),!1===STORE.getProjectData(PROJECT.currentProjectKey(),EXPLORE_DATA.STORE_KEY)&&a.qs("#navItem-explore-data-nav-link").addClass("disabled")):t.includes("mp")?(a.qsa("#navItem-dashboard-nav-link, #navGroupItem-connection, #navGroupItem-data-engineering, #navItem-explore-data-nav-link, #navGroupItem-ae, #navGroupItem-mp, #navGroupItem-md, #navItem-auto-code-nav-link, #navItem-score-models-nav-link").forEach(e=>e.removeClass("hidden")),a.qs("#navItem-db-connection-nav-link").addClass("disabled"),a.qs("#navItem-file-upload-nav-link").addClass("disabled"),a.qs("#navItem-validate-features-nav-link").addClass("disabled"),!1===STORE.getProjectData(PROJECT.currentProjectKey(),EXPLORE_DATA.STORE_KEY)&&a.qs("#navItem-explore-data-nav-link").addClass("disabled")):t.includes("md")&&(a.qsa("#navItem-dashboard-nav-link, #navGroupItem-connection, #navGroupItem-data-engineering, #navItem-explore-data-nav-link, #navGroupItem-ae, #navGroupItem-mp, #navGroupItem-md, #navItem-auto-code-nav-link, #navItem-score-models-nav-link").forEach(e=>e.removeClass("hidden")),a.qs("#navItem-db-connection-nav-link").addClass("disabled"),a.qs("#navItem-file-upload-nav-link").addClass("disabled"),a.qs("#navItem-validate-features-nav-link").addClass("disabled"),!1===STORE.getProjectData(PROJECT.currentProjectKey(),EXPLORE_DATA.STORE_KEY)&&a.qs("#navItem-explore-data-nav-link").addClass("disabled")),(STORE.getProjectMetadata(PROJECT.currentProjectKey(),DB_CONNECTION.STORE_KEY+"_connected")||STORE.getProjectMetadata(PROJECT.currentProjectKey(),FILE_UPLOAD.STORE_KEY+"_uploaded"))&&(a.qs("#navItem-db-connection-nav-link").addClass("disabled"),a.qs("#navItem-file-upload-nav-link").addClass("disabled")),STORE.getProjectMetadata(PROJECT.currentProjectKey(),VALIDATE_FEATURES.STORE_KEY+"_features_saved")&&a.qs("#navItem-validate-features-nav-link").addClass("disabled"),STORE.getProjectData(PROJECT.currentProjectKey(),EXPLORE_DATA.STORE_KEY)&&a.qsa("#navGroupItem-data-engineering, #navItem-explore-data-nav-link").forEach(e=>e.removeClass("hidden")),STORE.getProjectMetadata(PROJECT.currentProjectKey(),AE_AUTOMODEL.STORE_KEY+"_modeldev_complete")&&(a.qs("#navItem-ae-automodel-nav-link").addClass("disabled"),a.qsa("#navItem-dashboard-nav-link, #navGroupItem-connection, #navGroupItem-data-engineering, #navItem-explore-data-nav-link, #navGroupItem-ae, #navGroupItem-mp, #navGroupItem-md, #navItem-auto-code-nav-link, #navItem-score-models-nav-link").forEach(e=>e.removeClass("hidden"))),e.updateBreadcrumb()};var t=function(e,t,a,n){let r=qs("#breadcrumb-bar #breadcrumbItem-dashboard").cloneNode();r.id="breadcrumbItem-"+e,r.setAttribute("class",t||"");let o=qs("#breadcrumb-bar #breadcrumbItem-dashboard a").cloneNode();return""!=n&&null!=n&&"string"==typeof n||(n="javascript:(function(){})();"),o.id=e,o.setAttribute("href",n),o.setAttribute("class",""),o.innerText=a,r.append(o),r};return e.updateBreadcrumb=function(){let a=e.getCurrentPageMarkerString(),n=(e.getCurrentPageLinkNode(),qs("#main-nav"),[]);return n.push(qs("#breadcrumb-bar #breadcrumbItem-dashboard")),a.includes("dashboard")||(a.includes("connection")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-connectDB","","New DB Connection","/#/db-connection/"+PROJECT.currentProjectKey()))):a.includes("upload")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-connectDB","","File Upload","/#/file-upload/"+PROJECT.currentProjectKey()))):a.includes("validate-features")||a.includes("workflow-start")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-data-engineering","","Data Engineering","")),n.push(t("br-validate-featues","","Validate Features","/#/validate-features/"+PROJECT.currentProjectKey()))):a.includes("explore-data")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-data-engineering","","Data Engineering","")),n.push(t("br-explore-data","","Explore Data","/#/explore-data/"+PROJECT.currentProjectKey()))):a.includes("ae")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("algorithm-engineering","","Algorithm Engineering","")),n.push(t("br-model-development","","Model Development","/#/ae-automodel/"+PROJECT.currentProjectKey()))):a.includes("discrimination")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-model-performance","","Model Performance","")),n.push(t("br-ml-leaderboard","","ML Leaderboard","")),n.push(t("br-discrimination","","Discrimination","/#/mp/mll/discrimination/"+PROJECT.currentProjectKey()))):a.includes("calibration")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-model-performance","","Model Performance","")),n.push(t("br-ml-leaderboard","","ML Leaderboard","")),n.push(t("br-calibration","","Calibration","/#/mp/mll/calibration/"+PROJECT.currentProjectKey()))):a.includes("fprAndPA")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-model-performance","","Model Performance","")),n.push(t("br-ml-leaderboard","","ML Leaderboard","")),n.push(t("br-fpr","","FPR and Precision Analysis","/#/mp/mll/fprAndPA/"+PROJECT.currentProjectKey()))):a.includes("model-comparison")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-model-performance","","Model Performance","")),n.push(t("br-model-comparision","","Model Comparison","/#/mp/model-comparison/"+PROJECT.currentProjectKey()))):a.includes("auto-code")?(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-model-deployment","","Model Deployment","")),n.push(t("br-auto-code","","Auto Code Generator","/#/auto-code/"+PROJECT.currentProjectKey()))):a.includes("score-models")&&(n.push(t("br-project-"+PROJECT.currentProjectKey(),"",PROJECT.currentProjectKey(),"")),n.push(t("br-model-deployment","","Model Deployment","")),n.push(t("br-score-models","","Score Models","/#/score-models/"+PROJECT.currentProjectKey())))),qs("#breadcrumb-bar ul").innerHTML="",n.forEach(e=>qs("#breadcrumb-bar ul").append(e)),n},e}(APP||{}),APP=function(e){return e.init=function(){if("pinned"==readCookie("navPinned")&&e.pinNav(),e.initRoutes(),e.registerUIListeners(),e.isDebug()&&window.navigateTo&&0!=window.navigateTo.length&&"string"==typeof window.navigateTo)return e.router.navigate(window.navigateTo),void e.router.resolve();creds=CREDENTIALS.getUserCreds(),null==creds?e.router.navigate("/login"):e.router.navigate("/"),e.router.resolve()},e.isDebug=function(){let e=window.isDebug||readCookie("isDebug");return e=!(!e||void 0===e)},e}(APP||{});var PROJECT=function(e){_currentProjectKey=null,e.currentProjectKey=function(){if(null==_currentProjectKey&&!APP.isDebug())throw new Error("No project currently active");return null==_currentProjectKey&&APP.isDebug()&&useTestData?PROJECTS_DATA.testProjectKey():_currentProjectKey},e.setCurrentProjectKey=function(e){e&&(_currentProjectKey=e)},e.showCreateProjectDialog=async function(){return new Promise((e,t)=>{var a=createNode(createprojectTemplate());qs("#dialogs-sleeping").appendChild(a),APP.showDialog(a),[].forEach.call(a.qsa("button.close, #cancel-button"),function(e){e.addEventListener("click",e=>{APP.hideDialog(a),a.remove(),t("cancelled")})}),a.qs("#create-button").addEventListener("click",t=>{var n=a.qs("#input-pname").value,r=a.qs("#textarea-description").value,o=a.qs("#select-ptype").value,s=a.qs("#select-platform").value;APP.hideDialog(a),a.remove(),e({pname:n,description:r,ptype:o,platform:s})})})},e.createProject=async function(){let a=null;try{a=await e.showCreateProjectDialog()}catch(e){if("cancelled"==e)return APP.router.navigate("/"),void console.log(e)}if(!a)return APP.showError(i18n.en.APP.UI.ERROR.PROJECT_CREATION.GENERIC),void APP.router.navigate("/");try{var n=await t(a);"success"==n.status&&APP.showInfo(i18n.en.APP.UI.INFO.PROJECT_CREATION.GENERIC_SUCCESS)}catch(e){APP.showError(e.message)}APP.resetProgress(),APP.router.navigate(`/db-connection/${n.data.posts[0].projectKey}`)};var t=async function(t){let a=SERVER.getBaseAddress()+"project/new",n=CREDENTIALS.getUserCreds();if(APP.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.CREATE_PROJECT),null==n)throw new Error(i18n.en.APP.UI.ERROR.PROJECT_CREATION.USER_NOT_LOGGED_IN);let r=extend({key:n,pname:"",description:"",ptype:"",platform:"",NoModels:0},t),o=[];if(Object.keys(r).forEach(e=>{""===r[e]&&o.push(e)}),o.length>0){let e=new Error(`${i18n.en.APP.UI.ERROR.PROJECT_CREATION.EMPTY_INPUT}:\n${o.join(", ")}`);throw e.name="InputError",e}let s=null;try{s=useTestData?await PROJECTS_DATA.create(a,r):await SERVER.postData(a,r)}catch(e){s=null}try{if(null==s||"success"!=s.status&&200!=s.status){console.log({result:s});let e=new Error(i18n.en.APP.UI.ERROR.PROJECT_CREATION.GENERIC);throw e.name="GenericError",e}}catch(e){throw console.log(e),(e=new Error(i18n.en.APP.UI.ERROR.PROJECT_CREATION.GENERIC)).name="GenericError",e}return e.setCurrentProjectKey(s.data.posts[0].projectKey),s};return e.cleanUp=function(){e.setCurrentProjectKey("BLANK")},e}(PROJECT||{}),DB_CONNECTION=function(e){e.STORE_KEY="DB_CONNECTION";var t="123";e.getCurrentConnection=function(){return t},e.showDBConnectionDialog=async function(e){return new Promise((t,a)=>{var n=qs("#new-db-connection-dialog");n&&void 0!==n||(n=createNode(dbconnectionTemplate()),qs("#dialogs-sleeping").appendChild(n)),"development"==e.sourceType?n.qs("#dev-or-prod").checked=!1:n.qs("#dev-or-prod").checked=!0,n.qs("button.close").addEventListener("click",t=>{APP.hideDialog(n),n.remove(),"back"!=e.destinationOnCancel&&APP.router.navigate(e.destinationOnCancel),a("cancelled")});let r=function(e){n.qs("#next-button").setAttribute("disabled","disabled"),n.qs("#test-button").addClass("untested").removeClass("fail").removeClass("success")};n.qsa("#input-new-named-connection, #select-db-type, #input-db-name, #input-table-name, #input-db-server-name, #input-port-number, #input-db-username, #input-db-password").forEach(function(e,t){e.addEventListener("change",r)});let o=function(e){let a=!0;if(n.qsa("#input-new-named-connection, #select-db-type, #input-db-name, #input-table-name, #input-db-server-name, #input-port-number, #input-db-username, #input-db-password").forEach(function(e,t){e.hasClass("invalid")&&(a=!1)}),a){var s={connectionType:"test-button"==e.currentTarget.id?"test":"final",conname:n.qs("#input-new-named-connection").value,dbtype:n.qs("#select-db-type").value,dbname:n.qs("#input-db-name").value,tblname:n.qs("#input-table-name").value,serverip:n.qs("#input-db-server-name").value,portno:n.qs("#input-port-number").value,uname:n.qs("#input-db-username").value,passwd:n.qs("#input-db-password").value,sourcetype:n.qs("#dev-or-prod").checked,datatype:n.qs("#dev-or-prod").checked?"OUT_OF_TIME":"IN_TIME"};n.qs("#test-button").removeEventListener("click",o),n.qs("#next-button").removeEventListener("click",o),n.qsa("#input-new-named-connection, #select-db-type, #input-db-name, #input-table-name, #input-db-server-name, #input-port-number, #input-db-username, #input-db-password").forEach(function(e,t){e.removeEventListener("change",r)}),t(s)}else n.qs("#test-button").addClass("fail").removeClass("untested").removeClass("success")};n.qs("#test-button").addEventListener("click",o),n.qs("#next-button").addEventListener("click",o),n.open||APP.showDialog(n)})},e.dbConnection=async function(n){let r=null;"string"==typeof n&&(n={pkey:n,destinationOnSuccess:"/workflow-start",destinationOnError:"/",destinationOnCancel:"back",sourceType:"development"}),r=n.pkey;let o={connectionType:"test"};for(;"test"==o.connectionType;)try{if((o=await e.showDBConnectionDialog(n)).projectKey=r||PROJECT.currentProjectKey(),"test"==o.connectionType){let e=await a(o,!0);null!=e&&("success"==e.status||e.status>=200&&e.status<300)?(qs("#new-db-connection-dialog #test-button").toggleClass("untested,success"),qs("#new-db-connection-dialog #next-button").removeAttribute("disabled"),APP.resetProgress()):(qs("#new-db-connection-dialog #test-button").toggleClass("untested,fail"),qs("#new-db-connection-dialog #next-button").setAttribute("disabled","disabled"),APP.resetProgress()),console.log(e);continue}let s=qs("#new-db-connection-dialog");APP.hideDialog(s),s.remove();let i=await a(o,!1);return null!=i&&("success"==i.status||i.status>=200&&i.status<300)?(t=o.conname,APP.resetProgress(),STORE.setProjectMetadata(o.projectKey,DB_CONNECTION.STORE_KEY+"_connected",!0),"back"!=n.destinationOnSuccess&&APP.router.navigate(n.destinationOnSuccess),APP.showInfo("DB connection created successfully."),Promise.resolve(o)):(APP.resetProgress(),"back"!=n.destinationOnError&&APP.router.navigate(n.destinationOnError),APP.showError(i18n.en.APP.UI.ERROR.DB_CONNECTION.GENERIC+": "+i.status),Promise.reject(i18n.en.APP.UI.ERROR.DB_CONNECTION.GENERIC+": "+i.status))}catch(e){if(APP.resetProgress(),"cancelled"==e)return"back"!=n.destinationOnCancel&&APP.router.navigate(n.destinationOnCancel),console.log(e),Promise.reject(e)}if(!o)return APP.showError(i18n.en.APP.UI.ERROR.DB_CONNECTION.GENERIC),n.destinationOnError?"back"!=n.destinationOnError&&APP.router.navigate(n.destinationOnError):APP.router.navigate("/"),Promise.reject(i18n.en.APP.UI.ERROR.DB_CONNECTION.GENERIC)};var a=async function(e,t){let a=SERVER.getBaseAddress()+"connection/db/test";t||(a=SERVER.getBaseAddress()+"connection/db/new");let n=CREDENTIALS.getUserCreds();if(t?APP.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.TEST_CONNECTION):APP.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.CREATE_CONNECTION),null==n)throw new Error(i18n.en.APP.UI.ERROR.DB_CONNECTION.GENERIC);let r=extend({key:n,conname:"",dbtype:"",dbname:"",tblname:"",serverip:"",portno:"",uname:"",passwd:"",datatype:"IN_TIME"},e),o=[];if(Object.keys(r).forEach(e=>{""===r[e]&&o.push(e)}),o.length>0){let e=new Error(`${i18n.en.APP.UI.ERROR.DB_CONNECTION.EMPTY_INPUT}:\n${o.join(", ")}`);throw e.name="InputError",e}let s=null;try{s=useTestData?await DB_CONNECTION_DATA.connect(a,r):await SERVER.postData(a,r)}catch(e){s=null}if(null==s||"success"!=s.status&&!(s.status>=200&&s.status<300)){console.log({result:s});let e=new Error(i18n.en.APP.UI.ERROR.DB_CONNECTION.GENERIC);throw e.name="GenericError",e}return s};return e.hideDialog=function(){var e=qs("#new-db-connection-dialog");e&&!e.hidden&&e.qs("button.close").fireCustomEvent("click")},e}(DB_CONNECTION||{}),FILE_UPLOAD=function(e){e.STORE_KEY="FILE_UPLOAD",e.showUploadDialog=async function(e){return new Promise((o,s)=>{var i=qs("#file-upload-dialog");i&&void 0!==i||(i=createNode(fileuploadTemplate()),qs("#dialogs-sleeping").appendChild(i)),t(),"development"==e.sourceType?i.qs("#file-dev-or-prod").checked=!1:i.qs("#file-dev-or-prod").checked=!0,i.qs("button.close").addEventListener("click",t=>{APP.hideDialog(i),i.remove(),"back"!=e.destinationOnCancel&&APP.router.navigate(e.destinationOnCancel),s("cancelled")}),COMPACT_LABEL.registerCompactLabel(i.qs("#loc-on-server"));let l=function(e){i.qs("#file-next-button").setAttribute("disabled","disabled"),i.qs("#file-test-button").addClass("untested").removeClass("fail").removeClass("success")};i.qsa("#input-file-connection-name, #input-loc-on-server").forEach(function(e,t){e.addEventListener("change",l)});let d=function(e){let t=!0;if(i.qsa("#input-file-connection-name, #input-loc-on-server").forEach(function(e,a){e.hasClass("invalid")&&(t=!1)}),t){var s={connectionType:"file-test-button"==e.currentTarget.id?"test":"final",conname:i.qs("#input-file-connection-name").value,filePath:i.qs("#input-loc-on-server").value,sourcetype:i.qs("#file-dev-or-prod").checked,datatype:i.qs("#file-dev-or-prod").checked?"OUT_TIME":"IN_TIME"};i.qs("#file-test-button").removeEventListener("click",d),i.qs("#file-next-button").removeEventListener("click",d),i.qsa("#input-file-connection-name, #input-loc-on-server").forEach(function(e,t){e.removeEventListener("change",l)});var c=i.qs("#drop-area");c.removeEventListener("dragover",a),c.removeEventListener("dragenter",a),c.removeEventListener("dragleave",n),c.removeEventListener("drop",n),c.removeEventListener("drop",r),o(s)}else i.qs("#file-test-button").addClass("fail").removeClass("untested").removeClass("success")};i.qs("#file-test-button").addEventListener("click",d),i.qs("#file-next-button").addEventListener("click",d),i.open||APP.showDialog(i)})};var t=function(){qs("#file-upload-dialog");if(isDnDAvailable()){if(isDnDAvailable()){var e=qs("#drop-area");e.addEventListener("dragover",a),e.addEventListener("dragenter",a),e.addEventListener("dragleave",n),e.addEventListener("drop",n),e.addEventListener("drop",r)}e.qs("#file-upload-input").addEventListener("change",e=>{o(e.target.files)})}else dlgg.qs("#drop-area").addClass("no-dnd")},a=function(e){e.target.addClass("is-dragover"),e.preventDefault(),e.stopPropagation()},n=function(e){e.target.removeClass("is-dragover"),e.preventDefault(),e.stopPropagation()},r=function(e){e.target.removeClass("is-dragover"),droppedFiles=e.dataTransfer.files,o(droppedFiles),e.preventDefault(),e.stopPropagation()},o=function(e){var t=qs("#file-upload-dialog");[...e].forEach(s),t.qs("#drop-area").addClass("uploading")},s=function(e){var t=qs("#file-upload-dialog");let a=new FormData;a.append("file",e),fetch("/upload.php",{method:"POST",body:a}).then(e=>e.json()).then(function(e){t.qs("#drop-area").removeClass("uploading,is-dragover"),1==e.OK?(t.qs("#drop-area").addClass("upload-successful").removeClass("upload-failed"),t.qs(".status.success span.name").innerText=e.filename,t.qs("#input-loc-on-server").value=e.filename,t.qs("#input-loc-on-server").fireCustomEvent("change")):0==e.OK&&(t.qs("#drop-area").addClass("upload-failed").removeClass("upload-successful"),t.qs(".status.fail .server-error").innerText=e.info,t.qs(".status.fail .resolution").innerText=e.resolution)})};e.fileUpload=async function(t){let a=null;"string"==typeof t&&(t={pkey:t,destinationOnSuccess:"/workflow-start",destinationOnError:"/",destinationOnCancel:"back",sourceType:"development"}),a=t.pkey;let n={connectionType:"test"};for(;"test"==n.connectionType;)try{(n=await e.showUploadDialog(t)).projectKey=a||PROJECT.currentProjectKey();let r=qs("#file-upload-dialog");if("test"==n.connectionType){let e=await i(n,!0);null!=e&&("success"==e.status||e.status>=200&&e.status<300)?(r.qs("#file-test-button").toggleClass("untested,success"),r.qs("#file-next-button").removeAttribute("disabled")):(r.qs("#file-test-button").toggleClass("untested,fail"),r.qs("#file-next-button").setAttribute("disabled","disabled")),APP.resetProgress(),console.log(e);continue}APP.hideDialog(r),r.remove();let o=await i(n,!1);return null!=o&&("success"==o.status||o.status>=200&&o.status<300)?(_conname=n.conname,APP.resetProgress(),STORE.setProjectMetadata(n.projectKey,FILE_UPLOAD.STORE_KEY+"_connected",!0),"back"!=t.destinationOnSuccess&&APP.router.navigate(t.destinationOnSuccess),APP.showInfo("Flat file connection created successfully."),Promise.resolve(n)):(APP.resetProgress(),"back"!=t.destinationOnError&&APP.router.navigate(t.destinationOnError),APP.showError(i18n.en.APP.UI.ERROR.FILE_UPLOAD.GENERIC+": "+o.status),Promise.reject(i18n.en.APP.UI.ERROR.FILE_UPLOAD.GENERIC+": "+o.status))}catch(e){if(APP.resetProgress(),"cancelled"==e)return"back"!=t.destinationOnCancel&&APP.router.navigate(t.destinationOnCancel),console.log(e),Promise.reject(e)}if(!n)return APP.showError(i18n.en.APP.UI.ERROR.FILE_UPLOAD.GENERIC),t.destinationOnError?"back"!=t.destinationOnError&&APP.router.navigate(t.destinationOnError):APP.router.navigate("/"),Promise.reject(i18n.en.APP.UI.ERROR.FILE_UPLOAD.GENERIC)};var i=async function(e,t){let a=SERVER.getBaseAddress()+"connection/file/test";t||(a=SERVER.getBaseAddress()+"connection/file/new");let n=CREDENTIALS.getUserCreds();if(t?APP.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.TEST_CONNECTION):APP.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.CREATE_CONNECTION),null==n)throw new Error(i18n.en.APP.UI.ERROR.FILE_UPLOAD.GENERIC);let r=extend({key:n,conname:"",filePath:"",datatype:"IN_TIME"},e),o=[];if(Object.keys(r).forEach(e=>{""===r[e]&&o.push(e)}),o.length>0){let e=new Error(`${i18n.en.APP.UI.ERROR.FILE_UPLOAD.EMPTY_INPUT}:\n${o.join(", ")}`);throw e.name="InputError",e}let s=null;try{s=useTestData?await FILE_UPLOAD_DATA.connect(a,r):await SERVER.postData(a,r)}catch(e){s=null}if(null==s||"success"!=s.status&&!(s.status>=200&&s.status<300)){console.log({result:s});let e=new Error(i18n.en.APP.UI.ERROR.FILE_UPLOAD.GENERIC);throw e.name="GenericError",e}return s};return e.hideDialog=function(){var e=qs("#file-upload-dialog");e&&!e.hidden&&e.qs("button.close").fireCustomEvent("click")},e}(FILE_UPLOAD||{}),VALIDATE_FEATURES=function(e){e.STORE_KEY="VALIDATE_FEATURES";var t={target:null,input:[],reject:[],clear:function(){this.target=null,this.input=[],this.reject=[]},set:function(e,t){"target"==e?(null!==this.target&&this.input.push(this.target),this.target!==t&&(this.target=t,["input","reject"].forEach(e=>{let a=this[e].indexOf(t);a>=0&&this[e].splice(a,1)}))):["input","reject"].forEach(a=>{if(a==e)this[a].push(t);else{let e=this[a].indexOf(t);e>=0&&this[a].splice(e,1)}this.target==t&&(this.target=null)})}};e.getData=async function(t){let a=SERVER.getBaseAddress()+"de/featurevalidate",n=CREDENTIALS.getUserCreds(),r=t||PROJECT.currentProjectKey(),o=STORE.getProjectData(r,e.STORE_KEY);if(o)return o;if(APP.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.FETCHING_FEATURES),null==n)throw new Error(i18n.en.APP.UI.ERROR.USER_NOT_LOGGED_IN_CANNOT_RETRIEVE_PROJECTS+"\n"+i18n.en.APP.UI.ERROR.VALIDATE_FEATURES.GENERIC);if(null==r)throw new Error(i18n.en.APP.UI.INFO.VALIDATE_FEATURES.NOT_IN_CONTEXT_OF_PROJECT);let s={key:n,projectKey:r},i=null;try{i=useTestData?await VALIDATE_FEATURES_DATA.getData():await SERVER.postData(a,s)}catch(e){i=null}if(null==i||"success"!=i.status&&!(i.status>=200&&i.status<300)){console.log({result:i}),APP.showError("There was an error in fetching feature list from the server. Please contact an Administrator."),APP.resetProgress();let e=new Error(i18n.en.APP.UI.ERROR.VALIDATE_FEATURES.GENERIC);throw e.name="GenericError",e}return STORE.setProjectData(r,e.STORE_KEY,i),STORE.setProjectMetadata(r,e.STORE_KEY+"_features_fectched",!0),i},e.listObject=null;var a=function(e){let a=e.target,r=a.closest("tr").qs("td[data-key=featureName]").getAttribute("data-val"),o=a.getAttribute("extra");t.set(o,r),n()},n=function(){if(t.target){let e=qs(`#features-table-container td[data-val=${t.target}]~td.actions input[extra=target]`);null!==e?e.checked=!0:APP.noop()}t.input.length>0&&t.input.forEach(e=>{let t=qs(`#features-table-container td[data-val=${e}]~td.actions input[extra=input]`);null!==t?t.checked=!0:APP.noop()}),t.reject.length>0&&t.reject.forEach(e=>{let t=qs(`#features-table-container td[data-val=${e}]~td.actions input[extra=reject]`);null!==t?t.checked=!0:APP.noop()})};return e.validateFeatures=async function(r){let o=await e.getData();t.clear();let s=[];for(x in o.data.posts[0])t.input.push(x),s.push({featureName:x,featureType:o.data.posts[0][x],role:""});APP.resetProgress(),qs("#features-table-container").childNodes.forEach((e,t)=>e.remove()),!1===STORE.getProjectMetadata(r,VALIDATE_FEATURES.STORE_KEY+"_features_saved")&&qs("button#save-validate-features").removeAttribute("disabled"),qs("#features-table-container").appendChild(createNode(tableTemplate({data:s,headerText:["Feature Name","Feature Type","Role"],headerKeys:["featureName","featureType","actions"],hasSelectionCol:!0,hasSelectAll:!0,hasActionsColumn:!0,tableAttributes:{class:"scrollable-table"},actions:function(e){return`<div>\n                  ${togglebuttonTemplate({text:"Target",id:"target-button-"+e,name:"actions-"+e,class:"validate-action target",checked:!1,extra:"target"})}\n                  ${togglebuttonTemplate({text:"Input",id:"input-button-"+e,name:"actions-"+e,class:"validate-action input",checked:!0,extra:"input"})}\n                  ${togglebuttonTemplate({text:"Reject",id:"reject-button-"+e,name:"actions-"+e,class:"validate-action reject",checked:!1,extra:"reject"})}\n                </div>`}}))),qs("button#save-validate-features").addEventListener("click",e.save);let i=qs("#features-table-container thead tr.headerRow").cloneNode(!0);i.removeClass("headerRow").addClass("searchRow"),i.qsa("th").forEach(e=>{e.innerHTML="",e.hasClass("featureName,featureType")&&(e.innerHTML=`<input type="text" class="search ${e.hasClass("featureName")?"featureName":"featureType"}" data-search="${e.hasClass("featureName")?"featureName":"featureType"}"/>`)}),qs("#features-table-container thead").appendChild(i);var l=new List("features-table-container",{valueNames:["select","featureName","featureType","actions"]});e.listObject=l,e.listObject.on("updated",n),qs("#features-table-container thead tr.searchRow").qsa(".featureName, .featureType").forEach((e,t)=>{e.qsa("input[type=text]").forEach(e=>e.addEventListener("click",function(e){e.stopPropagation()}))}),qs("#features-table-container thead tr.headerRow").qsa(".featureName, .featureType").forEach((e,t)=>{e.addEventListener("click",e=>{if("th"!==e.target.tagName.toLowerCase())return;let t="asc";e.currentTarget.hasClass("asc")&&(t="desc"),l.sort(e.currentTarget.getAttribute("data-key"),{order:t}),e.currentTarget.closest("tr").qsa("th").forEach(e=>e.removeClass("asc,desc")),e.currentTarget.addClass(t)})}),qs("#features-table-container tbody").addEventListener("change",a),qs("#features-table-container .selectAll").addEventListener("change",e=>{qsa("#features-table-container td.select .on-off input").forEach((t,a)=>{t.checked=e.currentTarget.checked})}),qs(".validate-features .bulk-update-action").addEventListener("change",e=>{let a=e.target.value;""!=a&&(t.clear(),qsa("#features-table-container tbody tr td.select input:checked").forEach(e=>{t.set(a,e.closest("tr").qs("td.featureName").getAttribute("data-val"))})),n()}),qsa("#features-table-container td.select .on-off input").forEach((e,t)=>e.addEventListener("change",e=>{qs(".validate-features .bulk-update-action option:first-child").selected=!0,0==e.currentTarget.checked&&(qs("#features-table-container .selectAll").checked=!1)}))},e.save=async function(){let t=SERVER.getBaseAddress()+"de/modelcfg",a=CREDENTIALS.getUserCreds(),n=PROJECT.currentProjectKey();if(APP.setProgress("Saving features..."),null==a)throw new Error(i18n.en.APP.UI.ERROR.USER_NOT_LOGGED_IN_CANNOT_RETRIEVE_PROJECTS+"\n"+i18n.en.APP.UI.ERROR.VALIDATE_FEATURES.GENERIC);if(null==n)throw new Error(i18n.en.APP.UI.INFO.VALIDATE_FEATURES.NOT_IN_CONTEXT_OF_PROJECT);var r={key:a,projectKey:n,post:[{dropVar:[]},{dvVar:""}]};e.listObject.items.forEach(e=>{e.show()}),qsa("#features-table-container .validate-action.reject:checked").forEach((e,t)=>{r.post[0].dropVar.push(e.closest("tr").qs("td[data-key='featureName']").getAttribute("data-val"))}),qsa("#features-table-container .validate-action.target:checked").forEach((e,t)=>{r.post[1].dvVar=e.closest("tr").qs("td[data-key='featureName']").getAttribute("data-val")});let o=null;try{o=useTestData?await VALIDATE_FEATURES_DATA.save(r):await SERVER.postData(t,r)}catch(e){o=null}if(null==o||!("success"==o.status||o.status>=200&&o.status<300)){console.log({result:o}),APP.resetProgress(),APP.showError("Could not save feature settings. Please contact an Administrator.");let e=new Error("Could not save feature settings.");throw e.name="GenericError",e}APP.showInfo("Feature list saved successfully."),STORE.setProjectMetadata(n,e.STORE_KEY+"_features_saved",!0),APP.router.navigate(`/explore-data/${n}`),qs("button#save-validate-features").setAttribute("disabled","disabled"),APP.resetProgress()},e}(VALIDATE_FEATURES||{}),EXPLORE_DATA=function(e){e.STORE_KEY="EXPLORE_DATA",e.getData=async function(t){let a=SERVER.getBaseAddress()+"de/exploredata",n=CREDENTIALS.getUserCreds(),r=t||PROJECT.currentProjectKey(),o=STORE.getProjectData(r,EXPLORE_DATA.STORE_KEY);if(o)return o;if(useTestData){let t=await EXP_DATA.getData();return STORE.setProjectData(r,e.STORE_KEY,t),t}if(APP.setProgress(i18n.en.APP.UI.FOOTER.PROGRESS.FETCHING_FEATURES),null==n)throw new Error(i18n.en.APP.UI.ERROR.USER_NOT_LOGGED_IN_CANNOT_RETRIEVE_PROJECTS+"\n"+i18n.en.APP.UI.ERROR.EXPLORE_DATA.GENERIC);if(null==r)throw new Error(i18n.en.APP.UI.INFO.EXPLORE_DATA.NOT_IN_CONTEXT_OF_PROJECT);let s={key:n,projectKey:r},i=null;try{i=await SERVER.postData(a,s)}catch(e){i=null}if(null==i||"success"!=i.status&&!(i.status>=200&&i.status<300)){console.log({summaryresult:i}),APP.showError(`${i18n.en.APP.UI.ERROR.EXPLORE_DATA.GENERIC} Please contact an Administrator.`),APP.resetProgress();let e=new Error(i18n.en.APP.UI.ERROR.EXPLORE_DATA.GENERIC);throw e.name="GenericError",e}return STORE.setProjectData(t,e.STORE_KEY,i),i};var t=function(e){if(!e.target.hasClass("tab-input"))return;qsa(".tab-trigger[name='explore-data-tab-group']").forEach(e=>e.removeClass("selected"));"categorical-input"==e.target.id?qs("#categorical-trigger").addClass("selected"):"numerical-input"==e.target.id&&qs("#numerical-trigger").addClass("selected"),qs("#explore-summary-tabs-content-container input.tab-input:checked+.tab-content .explore-data-table-container").fixedTable.relayout()};return e.exploreData=async function(a){qs("#explore-summary-tabs-content-container").removeEventListener("change",t),qs("#explore-summary-tabs-content-container").addEventListener("change",t);let n=await e.getData(a),r=[],o={keys:["feature"].concat(Object.keys(n.data.posts[0].CatStatInfo)),colsMap:extend({feature:"Feature Name"},n.data.posts[0].CatStatInfo),colsArr:["Feature Name"].concat(Object.keys(n.data.posts[0].CatStatInfo).map(e=>n.data.posts[0].CatStatInfo[e])),data:Object.keys(n.data.posts[0].Categorical).map(e=>n.data.posts[0].Categorical[e]),format:["s",".2f","s"]},s={keys:["feature"].concat(Object.keys(n.data.posts[0].NumStatInfo)),colsMap:extend({feature:"Feature Name"},n.data.posts[0].NumStatInfo),colsArr:["Feature Name"].concat(Object.keys(n.data.posts[0].NumStatInfo).map(e=>n.data.posts[0].NumStatInfo[e])),data:Object.keys(n.data.posts[0].Numerical).map(e=>n.data.posts[0].Numerical[e]),format:["s",".2f",".2f",".2f",".2f",".2f",".2f"]};for(let e in n.data.posts[0])r.push(n.data.posts[0][e]);APP.resetProgress(),qsa("#explore-summary-tabs-content-container .tab-content .explore-data-table-container>*").forEach((e,t)=>e.remove()),qs("#explore-data-catgorical-data .explore-data-table-container").appendChild(createNode(tableTemplate({data:o.data,headerText:o.colsArr,headerKeys:o.keys,hasSelectionCol:!1,hasSelectAll:!1,hasActionsColumn:!1,tableAttributes:{class:"fixed-table"},applyTDStyles:!1}))),qs("#explore-data-numerical-data .explore-data-table-container").appendChild(createNode(tableTemplate({data:s.data,headerText:s.colsArr,headerKeys:s.keys,hasSelectionCol:!1,hasSelectAll:!1,hasActionsColumn:!1,tableAttributes:{class:"fixed-table"},applyTDStyles:!1}))),qsa("#explore-data .explore-data-table-container").forEach(e=>e.fixedTable=fixTable(e)),e.catlist=new List(qs("#explore-data-catgorical-data"),{valueNames:o.keys,searchClass:"input-search"}),e.numlist=new List(qs("#explore-data-numerical-data"),{valueNames:s.keys,searchClass:"input-search"}),qsa("#explore-summary-tabs-content-container label.compact").forEach(e=>COMPACT_LABEL.registerCompactLabel(e)),qsa("#explore-summary-tabs-content-container button.saveAsExcel").forEach(e=>{let t=e.closest(".table-container");t.qs("table").id=t.id+"-table"})},e}(EXPLORE_DATA||{}),PROC_CHARTS=function(e){var t={};return e.generate=function(e){let a={bindto:e.selector,size:{height:e.height,width:e.width},data:{columns:[[e.id].concat(e.data)],type:"area"},axis:{y:{max:100,min:0,padding:{top:0,bottom:0},tick:{values:e.yTicks}},x:{show:!1}},point:{show:!1},legend:{show:!1},transition:{duration:100},id:e.id,onrendered:function(){let e=function(e,t,a){var n=e.namespaceURI,r=document.createElementNS(n,"linearGradient");r.setAttribute("id",t);for(var o=0;o<a.length;o++){var s=a[o],i=document.createElementNS(n,"stop");for(var l in s)s.hasOwnProperty(l)&&i.setAttribute(l,s[l]);r.appendChild(i)}return(e.querySelector("defs")||e.insertBefore(document.createElementNS(n,"defs"),e.firstChild)).appendChild(r)}(qs(this.config.bindto).qs("svg"),`${this.config.data_columns[0][0]}Gradient`,[{offset:"0%","stop-color":"#70cb05"},{offset:"100%","stop-color":"#000"}]);e.setAttribute("x1","0"),e.setAttribute("x2","0"),e.setAttribute("y1","0"),e.setAttribute("y2","1")}};a.data.colors={},a.data.colors[e.id]=`url(#${e.id}Gradient)`,t[a.id]=c3.generate(a)},e.getChart=function(e){return t[e]},e}(PROC_CHARTS||{}),AE_AUTOMODEL=function(e){e.STORE_KEY=AE_AUTOMODEL;var t={CpuInfoAvail:1,StopFuncAail:1,PollingPeriod:2,ProgressBarWeightInfo:{DT:25,FE:25,MD:25,MC:25}},a=["<path id='filler0' value='0' d='m37.157 180.86h1' class='filler'/>","<path id='filler5' value='5' d='m37.157 180.86c-5.516-5.52-10.232-11.53-14.149-17.9' class='filler'/>","<path id='filler10' value='10' d='m37.157 180.86c-11.213-11.22-19.124-24.49-23.731-38.6' class='filler'/>","<path id='filler15' value='15' d='m37.157 180.86c-17.04-17.05-26.452-38.83-28.236-61.11' class='filler'/>","<path id='filler20' value='20' d='m37.157 180.86c-22.847-22.85-31.981-54.23-27.403-83.898' class='filler'/>","<path id='filler25' value='25' d='m37.157 180.86c-28.658-28.67-35.74-70.74-21.248-106.04' class='filler'/>","<path id='filler30' value='30' d='m37.157 180.86c-34.336-34.35-37.7-87.943-10.093-126.06' class='filler'/>","<path id='filler35' value='35' d='m37.157 180.86c-38.065-38.077-38.065-99.813 0.000001-137.89 1.7801-1.7807 3.612-3.4781 5.4907-5.0923' class='filler'/>","<path id='filler40' value='40' d='m37.157 180.86c-38.065-38.08-38.065-99.813 0-137.89 7.397-7.4 15.688-13.362 24.525-17.885' class='filler'/>","<path id='filler45' value='45' d='m37.157 180.86c-38.065-38.08-38.065-99.813 0-137.89 13.185-13.19 29.208-21.81 46.103-25.862' class='filler'/>","<path id='filler50' value='50' d='m37.157 180.86c-38.065-38.08-38.065-99.813 0-137.89 19.032-19.038 43.976-28.557 68.923-28.557' class='filler'/>","<path id='filler55' value='55' d='m37.157 180.86c-38.065-38.08-38.065-99.813 0-137.89 24.871-24.879 59.838-33.502 91.703-25.869' class='filler'/>","<path id='filler60' value='60' d='m37.157 180.86c-38.065-38.08-38.065-99.813 0-137.89 30.656-30.666 76.653-36.634 113.28-17.903' class='filler'/>","<path id='filler65' value='65' d='m37.157 180.86c-38.065-38.08-38.065-99.813 0-137.89 36.282-36.295 94.053-37.993 132.34-5.095' class='filler'/>","<path id='filler70' value='70' d='m37.157 180.86c-38.065-38.077-38.065-99.813 0.000001-137.89 38.064-38.076 99.776-38.076 137.84 0.000001 3.7325 3.7337 7.0991 7.6948 10.1 11.839' class='filler'/>","<path id='filler75' value='75' d='m37.157 180.86c-38.065-38.077-38.065-99.813 0.000001-137.89 38.064-38.076 99.776-38.076 137.84 0.000001 9.4075 9.4103 16.49 20.266 21.248 31.852' class='filler'/>","<path id='filler80' value='80' d='m37.157 180.86c-38.065-38.077-38.065-99.813 0.000001-137.89 38.064-38.076 99.776-38.076 137.84 0.000001 15.225 15.229 24.36 34.243 27.406 54.014' class='filler'/>","<path id='filler85' value='85' d='m37.157 180.86c-38.065-38.077-38.065-99.813 0.000001-137.89 38.064-38.076 99.776-38.076 137.84 0.000001 21.027 21.033 30.438 49.285 28.236 76.78' class='filler'/>","<path id='filler90' value='90' d='m37.157 180.86c-38.065-38.077-38.065-99.813 0.000001-137.89 38.064-38.076 99.776-38.076 137.84 0.000001 26.858 26.866 34.766 65.51 23.723 99.312' class='filler'/>","<path id='filler95' value='95' d='m37.157 180.86c-38.065-38.077-38.065-99.813 0.000001-137.89 38.064-38.076 99.776-38.076 137.84 0.000001 32.55 32.56 37.266 82.419 14.149 119.99' class='filler'/>","<path id='filler100' value='100' d='m37.157 180.86a97.468 97.501 0 0 1 0.000001 -137.89 97.468 97.501 0 0 1 137.84 0.000001 97.468 97.501 0 0 1 0 137.89' class='filler'/>"],n=function(){var e=qs("#model-dev-complete-dialog");e&&void 0!==e||(e=createNode(modeldevconfirmationdlgTemplate()),qs("#dialogs-sleeping").appendChild(e)),e.qsa("button.close, #next-button").forEach(t=>t.addEventListener("click",t=>{APP.hideDialog(e),e.remove(),STORE.setProjectMetadata(PROJECT.currentProjectKey(),AE_AUTOMODEL.STORE_KEY+"_modeldev_complete",!0),APP.router.navigate("/mp/mll/discrimination")})),e.open||APP.showDialog(e)},r=function(){return createNode(modeldevelopmentTemplate())},o=function(){return createNode(featureengineeringTemplate({fs:[{id:"TotalFeatures",name:"Total Features",value:559},{id:"IV",name:"Information Value",value:79,progress:.6},{id:"IV-FCDS",name:"FCDS Method (Categorical)",value:23,progress:.6},{id:"FS",name:"Fisher Score",value:313,progress:.6},{id:"FS-FCDS",name:"FCDS Method (Numerical)",value:89,progress:.6},{id:"FilteredFeatures",name:"Filtered Features",value:112},{id:"Bivariate",name:"Bivariate Analysis",value:54,progress:.6},{id:"RFE",name:"Recursive Feature Elimination",value:25,progress:.6},{id:"SelectedFeaturesCount",name:"Features Selected",value:25}],fe:[{id:"OPCA",name:"Oblique Principal Component Analysis",value:19,progress:.6},{id:"FactorAnalysis",name:"Factor Analysis",value:14,progress:.6},{id:"ExtractedFeaturesCount",name:"Features Extracted",value:33}],fo:[{id:"FeatureOptimization",name:"Feature optimization for model improvement",value:7,progress:.6},{id:"FeatureOptimization",name:"Features Optimized",value:7}]}))},s=function(){return createNode(datatreatmentTemplate({MissingImputation:{Status:"Not Started",CompletionPerc:0},OutlierTreatment:{Status:"Not Started",CompletionPerc:0},AnomalyHandling:{Status:"Not Started",CompletionPerc:0},Transformation:{Status:"Not Started",CompletionPerc:0}}))},i=new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(function(e){e.forEach(function(e){if("attributes"==e.type&&e.attributeName.startsWith("data-")){if(e.target.hasClass("contentValue")){let t=e.target;if(e.target.getAttribute("contentTarget")){if(!(t=t.qsa(t.getAttribute("contentTarget"))))return}else t=[t];t.forEach(e=>e.innerText=e.getAttribute("data-value"))}else if(e.target.hasClass("fe-progress-bar"))e.target.qs(".progress").setAttribute("style",`--progress-value:${parseInt(e.target.getAttribute("data-value"))}%`),e.target.qs(".value").innerText=e.target.getAttribute("data-value")+"%";else if("big-progress-dial"==e.target.id)l();else if(e.target.hasClass("bar"))e.target.qs(".value").innerText=e.target.getAttribute("data-value")+"%",e.target.qs(".progress").style.width=parseInt(e.target.getAttribute("data-value"))+"%";else if(e.target.hasClass("dial")){let t=e.target,n=e.target.getAttribute("data-value");"dt"==e.target.tagName.toLowerCase()&&(t=e.target.nextElementSibling);let r=t.qs(".filler"),o=t.qs(".blob");t.qs("span").innerText=parseInt(n)+"%",r.setAttribute("d",function(e){return e<0&&(e=0),e>100&&(e=100),e=Math.round(e/5),a[e].match(/ d=\'([\w\d\.\-\s]*)\'/)[1]}(parseInt(n)));let s=r.getPointAtLength(r.getTotalLength());o.setAttribute("cx",s.x),o.setAttribute("cy",s.y)}else if(e.target.hasClass("md-model")){let t=e.target.getAttribute("data-value");t||(t=0),e.target.setAttribute("style",`--progress-value: ${Math.floor(t)}%`)}let t=qs("#current-progress td#IV-FCDS-value");t&&t.closest("table").setAttribute("style",`--td-offset-left: ${t.offsetLeft}px; --td-offset-top: ${t.offsetTop}px; --td-offset-height: ${t.offsetHeight}px;`)}})}),l=function(){let e=qs("#big-progress-dial"),t=e.attrs(),a={dt:parseInt(t["data-dt-wt"]),fe:parseInt(t["data-fe-wt"]),md:parseInt(t["data-md-wt"])},n=e.qsa(".slice");a.total=a.dt+a.fe+a.md;let r=Math.round(parseInt(t["data-dt-value"])*n.length*a.dt/a.total/100),o=Math.round(parseInt(t["data-fe-value"])*n.length*a.fe/a.total/100),s=Math.round(parseInt(t["data-md-value"])*n.length*a.md/a.total/100);n.forEach(e=>e.removeClass("dt,fe,md"));for(let e=0;e<n.length;e++)e<r&&n[e].removeClass("dt,fe,md").addClass("dt"),e>=r&&e<r+o&&n[e].removeClass("dt,fe,md").addClass("fe"),e>=r+o&&e<r+o+s&&n[e].removeClass("dt,fe,md").addClass("md");100==parseInt(t["data-fe-value"])&&100==parseInt(t["data-dt-value"])&&100==parseInt(t["data-md-value"])&&n[n.length-1].removeClass("dt,fe,md").addClass("md");let i=`${Math.round((parseFloat(t["data-dt-value"])*a.dt+parseFloat(t["data-fe-value"])*a.fe+parseFloat(t["data-md-value"])*a.md)/a.total)}%`;e.qs("#progress-text").innerText=i,100!=parseInt(i)?e.qs("#slices").addClass("animate"):e.qs("#slices").removeClass("animate")},d=function(e,t,a){var n=[];for(let r=0;r<e;r++)n.push(Math.floor(t+Math.random()*(a-t)));return n};e.generateRandomData=d,e.showAutoModel=async function(a){APP.resetCurrentPageMarker(),APP.setCurrentPageMarker("AutoModelDev"),qs("#main-content").setAttribute("class",""),async function(a){let i=qs("#automodel");i.innerHTML=aeautomodelTemplate(),i.qsa("label.compact").forEach(e=>COMPACT_LABEL.registerCompactLabel(e));let l=parseInt(getComputedStyle(qs("#processor-stats")).getPropertyValue("--chart-width")),c=parseInt(getComputedStyle(qs("#processor-stats")).getPropertyValue("--chart-height")),p=await e.getReport({projectKey:a});if(p&&void 0!==p||(APP.showWarning("Could not retrieve report from server. Proceeding with default."),p=JSON.parse('{\n        "State": "IDLE",\n        "StartTime": 0,\n        "TotalExecutionTime": 0,\n        "Summary": {\n          "NumOfRows": "Unknown",\n          "NumOfCols": "Unknown",\n          "IncidenceRate": "Unknown"\n        },\n        "ProcessorUtilization": {\n          "Enable": "TRUE",\n          "Power": 0,\n          "GpuTemp": 0,\n          "GpuUsage": 0,\n          "CpuTemp": 0,\n          "CpuUsage": 0\n        }\n      }')),p&&p.State&&"completed"==p.State.toLowerCase())n();else{try{PROC_CHARTS.generate({yTicks:[0,50,100],id:"power",selector:"#power",width:l,height:c,data:d(100,40,100)}),PROC_CHARTS.generate({yTicks:[0,50,100],id:"gpu-temp",selector:"#gpu-temp",width:l,height:c,data:d(100,40,60)}),PROC_CHARTS.generate({yTicks:[0,50,100],id:"gpu-usage",selector:"#gpu-usage",width:l,height:c,data:d(100,30,90)}),PROC_CHARTS.generate({yTicks:[0,50,100],id:"cpu-temp",selector:"#cpu-temp",width:l,height:c,data:d(100,40,60)}),PROC_CHARTS.generate({yTicks:[0,50,100],id:"cpu-usage",selector:"#cpu-usage",width:l,height:c,data:d(100,30,90)})}catch(e){}if(qs("#completed-panel-1").appendChild(s()),qs("#completed-panel-2").appendChild(o()),qsa("#completed-panel-2 h4").forEach(e=>e.removeClass("running").addClass("show")),qs("#current-progress").appendChild(s()),qs("#current-progress").appendChild(o()),qs("#current-progress").appendChild(r()),qsa(".fe-stats h4").forEach(e=>{e.addEventListener("click",function(e){e.currentTarget.hasClass("show")?e.currentTarget.removeClass("show"):e.currentTarget.toggleClass("current")})}),e.updateProgress(p),"running"==p.State.toLowerCase()){qs("#model-development").addClass("started"),t.pkey=a,u(t),qs("#model-development").addClass("started"),APP.setProgress("Polling For Report...",!1);let r=e.pollReport(null,t.PollingPeriod<10?10:t.PollingPeriod);r.then(n),r.catch(function(e){e&&e.State&&"interrupted"==e.State.toLowerCase()||APP.router.navigate("/")}),APP.resetProgress()}}}(a),qs("#start-ae").addEventListener("click",async function(){let r=await e.start({projectKey:a});(t=extend(t,r||{})).pkey=a,u(t),qs("#model-development").addClass("started"),APP.setProgress("Polling For Report...",!1);let o=e.pollReport(null,t.PollingPeriod<10?10:t.PollingPeriod);o.then(n),o.catch(function(e){e&&e.State&&"interrupted"==e.State.toLowerCase()||APP.router.navigate("/")}),APP.resetProgress()}),c(),STORE.setProjectMetadata(PROJECT.currentProjectKey(),AE_AUTOMODEL.STORE_KEY+"_modeldev_loaded",!0)};var c=function(){i.disconnect(),qsa(".bind").forEach(e=>i.observe(e,{attributes:!0}))},u=function(e){(e=e||t).CpuInfoAvail||qs("#processor-stats").addClass("unavailable"),e.StopFuncAail||qs("#big-stop-button").addClass("unavailable")},p=!0;e.unload=function(){p=!1,f&&clearTimeout(f),ACCORDION.deregister("#md-details .accordion-container")};var f=null;return e.pollReport=function(a,n){var r=Number(new Date)+(a||216e5);n=1e3*n||1e4,p=!0;var o=async function(a,s){f=null;try{APP.setProgress("Polling For Report...",!1);var i=await e.getReport({projectKey:t.pkey});APP.resetProgress()}catch(e){return console.error("Exception in polling.\n",e),APP.showError("Error in retrieving updates from server. Please contact adminitrator."),s(e)}if(!i||void 0===i)return console.error("Null result in polling."),s(new Error("Error in retrieving updates from server. Please contact adminitrator."));if(!(Number(new Date)<r))return s(new Error("timed out for "+e.pollReport+": "+arguments));e.updateProgress(i);try{if("completed"==i.ModelDev.Status.toLowerCase())return a(i)}catch(e){}if(!p)return p=!0,s({State:"interrupted"});f=setTimeout(o,n,a,s)};return new Promise(o)},e.updateProgress=function(e){c();let a=createNode("<div></div>");try{a.removeClass("fe,md").addClass("dt"),e.Summary.TuneParam&&0!=e.Summary.TuneParam.length||(e.Summary.TuneParam=["AUC"]),e.Summary.TuneParam.forEach((e,t)=>{let a=qs("#tuning-params option.template").cloneNode();0==t&&a.setAttribute("selected","selected"),a.removeAttribute("style"),a.setAttribute("value",e.toLowerCase().replace(/\s/g,"_")),a.setAttribute("data-value",e.toLowerCase().replace(/\s/g,"_")),a.innerText=e,qs("#tuning-params select").appendChild(a)}),e.Summary.Dataset||(e.Summary.Dataset=["Training"]),Array.isArray(e.Summary.Dataset)||(e.Summary.Dataset=[e.Summary.Dataset]),e.Summary.Dataset.forEach((e,t)=>{let a=qs("#data-source option.template").cloneNode();0==t&&a.setAttribute("selected","selected"),a.removeAttribute("style"),a.setAttribute("value",e.toLowerCase().replace(/\s/g,"_")),a.setAttribute("data-value",e.toLowerCase().replace(/\s/g,"_")),a.innerText=e,qs("#data-source select").appendChild(a)}),qs("#incidence-rate").setAttribute("data-value",parseFloat(e.Summary.IncidenceRate).toFixed(5)),qs("#numOfRows").setAttribute("data-value",e.Summary.NumOfRows),qs("#numOfCols").setAttribute("data-value",e.Summary.NumOfCols),qs("#dv").setAttribute("data-value",e.Summary.dv);let n=null,r="";e&&e.TotalExecutionTime&&(r=(r=`${(n=e.TotalExecutionTime.match(/([\d]+)\:([\d]+)\:([\d]+)\.([\d]+)/))[1]}h ${n[2]}m ${n[3]}s`).replace(/0[hms]\s/,""),qs("#time-running").setAttribute("data-value",r));try{PROC_CHARTS.getChart("power").flow({columns:[["power"].concat([e.ProcessorUtilization.Power?e.ProcessorUtilization.Power:d(1,40,100)[0]])]}),PROC_CHARTS.getChart("gpu-temp").flow({columns:[["gpu-temp"].concat([e.ProcessorUtilization.GpuTemp?e.ProcessorUtilization.GpuTemp:d(1,40,60)[0]])]}),PROC_CHARTS.getChart("gpu-usage").flow({columns:[["gpu-usage"].concat([e.ProcessorUtilization.GpuUsage?e.ProcessorUtilization.GpuUsage:d(1,30,90)[0]])]}),PROC_CHARTS.getChart("cpu-temp").flow({columns:[["cpu-temp"].concat([e.ProcessorUtilization.CpuTemp?e.ProcessorUtilization.CpuTemp:d(1,40,60)[0]])]}),PROC_CHARTS.getChart("cpu-usage").flow({columns:[["cpu-usage"].concat([e.ProcessorUtilization.CpuUsage?e.ProcessorUtilization.CpuUsage:d(1,30,90)[0]])]})}catch(e){}let o=extend({MissingImputation:0,OutlierTreatment:0,AnomalyHandling:0,Transformation:0,total:0},{MissingImputation:e.DataTreatment.MissingImputation.CompletionPerc,OutlierTreatment:e.DataTreatment.OutlierTreatment.CompletionPerc,AnomalyHandling:e.DataTreatment.AnomalyHandling.CompletionPerc,Transformation:e.DataTreatment.Transformation.CompletionPerc});o.total=(o.MissingImputation*t.ProgressBarWeightInfo.DT+o.OutlierTreatment*t.ProgressBarWeightInfo.FE+o.AnomalyHandling*t.ProgressBarWeightInfo.MD+o.Transformation*t.ProgressBarWeightInfo.MC)/(t.ProgressBarWeightInfo.DT+t.ProgressBarWeightInfo.FE+t.ProgressBarWeightInfo.MD+t.ProgressBarWeightInfo.MC),qsa("dt.dial.dt.bind").forEach(e=>e.setAttribute("data-value",Math.round(o.total))),qs("#current-progress-dial").setAttribute("data-value",`${Math.round(o.total)}%`),qs("#big-progress-dial").setAttribute("data-dt-value",`${Math.floor(o.total)}%`);for(let e in o)qsa(`#current-progress .data-treatment .${e}.bind, .completed-panel .data-treatment .${e}.bind`).forEach(t=>t.setAttribute("data-value",Math.round(o[e])));if(Math.round(parseFloat(""+o.total))<100)return void qs("#stages").removeClass("fe,md,dt").addClass(a.className);if(e.FeatureEngineering.CompletionPerc=(6*parseFloat(e.FeatureEngineering.FeatureSelection.CompletionPerc)+2*parseFloat(e.FeatureEngineering.FeatureExtraction.CompletionPerc)+parseFloat(e.FeatureEngineering.FeatureOptimization.CompletionPerc))/9,e.FeatureEngineering.Status||(e.FeatureEngineering.Status="Running","completed"==e.FeatureEngineering.FeatureSelection.Status.toLowerCase()&&"completed"==e.FeatureEngineering.FeatureExtraction.Status.toLowerCase()&&"completed"==e.FeatureEngineering.FeatureOptimization.Status.toLowerCase()&&(e.FeatureEngineering.Status="COMPLETED"),"not started"==e.FeatureEngineering.FeatureSelection.Status.toLowerCase()&&"not started"==e.FeatureEngineering.FeatureExtraction.Status.toLowerCase()&&"not started"==e.FeatureEngineering.FeatureOptimization.Status.toLowerCase()&&(e.FeatureEngineering.Status="Not Started")),e.FeatureEngineering.CompletionPerc>0&&(a.removeClass("dt,md").addClass("fe"),qs("#current-progress-dial").setAttribute("data-value",`${Math.round(parseFloat(e.FeatureEngineering.CompletionPerc))}%`),qs("#completed-panel-1").addClass("show")),qs("#big-progress-dial").setAttribute("data-fe-value",`${Math.floor(parseFloat(e.FeatureEngineering.CompletionPerc))}%`),qsa("dt.dial.fe.bind").forEach(t=>t.setAttribute("data-value",Math.round(parseFloat(e.FeatureEngineering.CompletionPerc)))),qsa(".fe-stats tr.TotalFeatures .bind").forEach(t=>t.setAttribute("data-value",e.FeatureEngineering.TotalFeatures)),e.FeatureEngineering.FeatureSelection.FilteredFeatures||(e.FeatureEngineering.FeatureSelection.FilteredFeatures=e.FeatureEngineering.FeatureSelection.SubSteps["IV-FCDS"].SelectedFeaturesCount+e.FeatureEngineering.FeatureSelection.SubSteps["FS-FCDS"].SelectedFeaturesCount),qsa(".fe-stats tr.FilteredFeatures .bind").forEach(t=>t.setAttribute("data-value",e.FeatureEngineering.FeatureSelection.FilteredFeatures)),qsa(".fe-stats tr.SelectedFeaturesCount .bind").forEach(t=>t.setAttribute("data-value",e.FeatureEngineering.FeatureSelection.SelectedFeaturesCount)),["IV","IV-FCDS","FS","FS-FCDS","Bivariate","RFE"].forEach(t=>{qsa(`.fe-stats tr.${t} .fe-value.bind`).forEach(a=>a.setAttribute("data-value",Math.round(parseFloat(e.FeatureEngineering.FeatureSelection.SubSteps[t].SelectedFeaturesCount)))),qsa(`.fe-stats tr.${t} .fe-progress-bar.bind`).forEach(a=>a.setAttribute("data-value",Math.round(parseFloat(e.FeatureEngineering.FeatureSelection.SubSteps[t].CompletionPerc))))}),qsa(".fe-stats tr.ExtractedFeaturesCount .bind").forEach(t=>t.setAttribute("data-value",e.FeatureEngineering.FeatureExtraction.ExtractedFeaturesCount)),["OPCA","FactorAnalysis"].forEach(t=>{qsa(`.fe-stats tr.${t} .fe-value.bind`).forEach(a=>a.setAttribute("data-value",e.FeatureEngineering.FeatureExtraction.SubSteps[t].SelectedFeaturesCount)),qsa(`.fe-stats tr.${t} .fe-progress-bar.bind`).forEach(a=>a.setAttribute("data-value",Math.round(parseFloat(e.FeatureEngineering.FeatureExtraction.SubSteps[t].CompletionPerc))))}),qsa(".fe-stats tr.FeatureOptimization .bind").forEach(t=>t.setAttribute("data-value",e.FeatureEngineering.FeatureOptimization.OptimizedFeaturesCount)),qsa(".fe-stats tr.FeatureOptimization .fe-progress-bar.bind").forEach(t=>t.setAttribute("data-value",Math.round(parseFloat(e.FeatureEngineering.FeatureOptimization.CompletionPerc)))),Math.round(parseFloat(""+e.FeatureEngineering.CompletionPerc))<100)return void qs("#stages").removeClass("fe,md,dt").addClass(a.className);let s=0,i=0,l=0;["RF","GBM","XG","ANN","LRM","ANNLBGFS","ANNSGD","ANNADAM1"].forEach(t=>{let n=qs(`#md-stats #${t}.bind`),r=e.ModelDev.ModelInfo[t];if(!r)return n.addClass("unavailable"),void qs("#stages").removeClass("fe,md,dt").addClass(a.className);if(n.setAttribute("data-value",Math.round(parseFloat(r.CompletionPerc))),"not started"==r.Status.toLowerCase())l+=parseFloat(r.TotalModels);else if("done"==r.Status.toLowerCase())l+=parseFloat(r.TotalModels),s+=parseFloat(r.TotalModels),n.removeClass("running,unavailable").addClass("ready");else{n.removeClass("ready,unavailable").addClass("running");let e=parseFloat(r.TotalModels),t=Math.round(e*parseFloat(r.CompletionPerc)/100);l+=e,s+=t,i+=e-t}});let c=0,u=qsa("#tiny-boxes .tiny-box"),p=s*u.length/l,f=i*u.length/l,h=[20,50,75];for(c=0;c<u.length;c++)u[c].removeClass("ready, running, not-started"),c<Math.round(p)?u[c].addClass("ready"):c>=Math.round(p)&&c<Math.round(p+f)?u[c].addClass("running").setAttribute("style",`--fill:${h[Math.floor(3*Math.random())]}%`):u[c].addClass("not-started");if(qs("#md-subtext .text.running").setAttribute("data-value",""+Math.round(f)),qs("#md-subtext .text.total").setAttribute("data-value",""+Math.round(l)),e.ModelDev.CompletionPerc=l>0?100*s/l:0,qsa("dt.dial.md.bind").forEach(t=>t.setAttribute("data-value",Math.round(parseFloat(e.ModelDev.CompletionPerc)))),qs("#big-progress-dial").setAttribute("data-md-value",`${Math.floor(parseFloat(e.ModelDev.CompletionPerc))}%`),qs("#current-progress-dial").setAttribute("data-value",`${Math.round(parseFloat(e.ModelDev.CompletionPerc))}%`),!(e.ModelDev.CompletionPerc>0||"running"==e.ModelDev.Status.toLowerCase()))return void qs("#stages").removeClass("fe,md,dt").addClass(a.className);a.removeClass("dt,fe").addClass("md"),qsa(".completed-panel").forEach(e=>e.addClass("show"))}catch(e){APP.showWarning("Missing information in update report."),qs("#stages").removeClass("fe,md,dt").addClass(a.className),console.log(e)}qs("#stages").removeClass("fe,md,dt").addClass(a.className)},e.getReport=async function(e){if(useTestData){return await MD_REPORT_DATA.getReport()}let t=SERVER.getBaseAddress()+"rep",a=CREDENTIALS.getUserCreds();if(null==a)throw new Error(i18n.en.APP.UI.ERROR.MODELCFG.USER_NOT_LOGGED_IN);let n=extend({key:a,projectKey:""},e),r=null;try{r=await SERVER.postData(t,n)}catch(e){r=null}return console.log(r),r},e.start=async function(e){let t=SERVER.getBaseAddress()+"start",a=CREDENTIALS.getUserCreds();if(APP.setProgress("Starting project..."),null==a)throw new Error(i18n.en.APP.UI.ERROR.MODELCFG.USER_NOT_LOGGED_IN);let n=extend({key:a,projectKey:""},e),r=null;try{r=useTestData?await MD_REPORT_DATA.start():await SERVER.postData(t,n)}catch(e){r=null}APP.resetProgress(),console.log(r)},e}(AE_AUTOMODEL||{}),ML_LEADERBOARD=function(e){e.STORE_KEY="ML_LEADERBOARD";var t={},a=null,n=!1,r=null,o=!1;e.dataSource="test";var s=null,i=function(t){e.redrawGraphs()},l=function(){let t=qs("#ml-leaderboard");a=t.qs(".separator"),t.addEventListener("mousedown",e=>{e.target==a&&!0&e.buttons&&(n=!0,null==r&&(r=qs("#ml-table-outer-container").offsetWidth))}),t.addEventListener("mouseup",t=>{n&&(n=!1,requestAnimationFrame(e.redrawGraphs))}),t.addEventListener("mousemove",e=>{if(n){let a=qs("#ml-leaderboard"),n=parseInt(window.getComputedStyle(a).getPropertyValue("--graph-area-delta"));if(r+n<410&&e.movementX<0)return;t.style.setProperty("--graph-area-delta",n+e.movementX)}}),e.windowListenerAdded||(window.addEventListener("resize",i),e.windowListenerAdded=!0),t.qs("#sourceSelect").addEventListener("change",t=>{e.dataSource=t.target.value,o=!1,requestAnimationFrame(e.generateGraphs)})},d=async function(e){APP.resetCurrentPageMarker(),qs("#main-content").setAttribute("class",""),qs("#main-content").addClass("ml-leaderboard");let t=e||PROJECT.currentProjectKey();(s=STORE.getProjectData(t,ML_LEADERBOARD.STORE_KEY))||(s=await f({projectKey:e}),STORE.setProjectData(t,ML_LEADERBOARD.STORE_KEY,s),STORE.setProjectMetadata(t,ML_LEADERBOARD.STORE_KEY+"_graphdata_loaded",!0)),qs("#leaderboard").innerHTML=mpmlleaderboardTemplate(),l()};e.unload=function(){e.windowListenerAdded&&(window.removeEventListener("resize",i),delete e.windowListenerAdded)},e.show=async function(t,a){console.log("showing..."),await d(a),c(),qsa("#ml-leaderboard #graph-area .active").forEach(e=>e.removeClass("active")),qs(`#ml-leaderboard #graph-area #${APP.getCurrentPageEndToken()}`).addClass("active"),o=!1,requestAnimationFrame(e.generateGraphs)};var c=function(){if(qs("#ml-leaderboard .tableContainer td"))return;let e="";Object.keys(s).forEach(t=>{e+=u({type:s[t].platform.toLowerCase(),id:t.toLowerCase(),name:s[t].name})}),qs("#ml-leaderboard .tableContainer table tbody").innerHTML=e,qs("#ml-table-outer-container tbody tr:first-child td").addClass("selected")},u=function(e){return`\n      <tr>\n        <td class='type-${e.type}' id='${e.id}' data-type='${e.type}'><a href='javascript:ML_LEADERBOARD.selectRow("${e.id}");'>${e.name}</a></td>\n      </tr>`};e.selectRow=function(t){qsa("#ml-leaderboard .tableContainer td.selected").forEach(e=>e.removeClass("selected")),qs(`#ml-leaderboard .tableContainer td#${t}`).addClass("selected"),o=!1,requestAnimationFrame(e.generateGraphs)},e.redrawGraphs=function(){CHART.allowedCharts[APP.getCurrentPageEndToken()].forEach(e=>{let a=t[e].element;if(t[e].isD3Chart&&(a=t[e].element.node()),!a.closest(".graphs-outer-area").hasClass("active"))return;let n=a.closest(".graph-outer-container");t[e].resize({width:n.offsetWidth-30,height:n.offsetHeight-n.qs("h4").offsetHeight-22})})},e.generateGraphs=function(a){if(!a||"string"!=typeof a){let e=qs("#ml-table-outer-container td.selected");a=e?e.id:qs("#ml-table-outer-container tr:first-child td").id}if(Object.keys(s).forEach(e=>{e.toLowerCase()==a&&(a=e)}),!o)switch(APP.getCurrentPageEndToken()){case"discrimination":t[ROC_CHART.type]=ROC_CHART.generate({data:{y1:{name:"ROC",values:s[a][e.dataSource].Roc.yPoints,keys:s[a][e.dataSource].Roc.xPoints},auc:s[a][e.dataSource].Roc.score}}),t[KS_CHART.type]=KS_CHART.generate({data:{score:s[a][e.dataSource].KS.score,y1:{name:"y",values:s[a][e.dataSource].KS.yPoints,keys:s[a][e.dataSource].KS.xPoints},y2:{name:"ydash",values:s[a][e.dataSource].KS.yDashPoints,keys:s[a][e.dataSource].KS.xDashPoints}}}),t[LIFT_CHART.type]=LIFT_CHART.generate({data:{y1:{name:"y",values:s[a][e.dataSource].DecileLift.yPoints,keys:s[a][e.dataSource].DecileLift.xPoints}}}),t[DISCRIMINATION_CHART.type]&&t[DISCRIMINATION_CHART.type].clear(),requestAnimationFrame(function(){t[DISCRIMINATION_CHART.type]=DISCRIMINATION_CHART.generate({score:s[a][e.dataSource].Discrimination.score?s[a][e.dataSource].Discrimination.score.toFixed(4):0,data:{y1:{name:"0",values:s[a][e.dataSource].Discrimination.xPoints,keys:[]},y2:{name:"1",values:s[a][e.dataSource].Discrimination.yPoints,keys:[]}}})}),o=!0;break;case"calibration":t[CALIBRATION_CHART.type]=CALIBRATION_CHART.generate({data:{y1:{name:"Reliability",values:s[a][e.dataSource].CalibrationInfo.yPoints,keys:s[a][e.dataSource].CalibrationInfo.xPoints},score:s[a][e.dataSource].CalibrationInfo.score,scoreName:a}}),o=!0,requestAnimationFrame(function(){e.redrawGraphs(),d3.select(".c3-legend-item-Reliability text").text(`${s[a].name}, score=${d3.format(".3f")(s[a][e.dataSource].CalibrationInfo.score)}`)});break;case"fprAndPA":probData=s[a][e.dataSource].probStats.map((e,t)=>(e.rowIndex=t,e)),probData=probData.sort(function(e,t){return e.probLevel<t.probLevel?-1:e.probLevel>t.probLevel?1:0});let n=PROB_LEVELS.generate({data:probData});n.addEventListener("click",e=>{e.target.closest("thead")||(n.qsa("tr.selected").forEach(e=>e.removeClass("selected")),e.target.closest("tr").addClass("selected"),p({modelID:a}))}),n.qs("tbody tr:first-child").addClass("selected"),p({modelID:a}),t[PRECISION_CHART.type]=PRECISION_CHART.generate({data:{y1:{name:"Reliability",values:s[a][e.dataSource].PrecisionInfo.yPoints,keys:s[a][e.dataSource].PrecisionInfo.xPoints}}});let r=s[a][e.dataSource].probStats.map(e=>e.probLevel);t[OGIVE_CHART.type]=OGIVE_CHART.generate({data:{y1:{name:"Specificity",values:s[a][e.dataSource].probStats.map(e=>e.spec/100),keys:r},y2:{name:"Sensitivity",values:s[a][e.dataSource].probStats.map(e=>e.sens/100),keys:r}}}),o=!0}};var p=function(t){let a=qs("#probLevels table tr.selected");a&&void 0!==a||(a=qs("#probLevels table tbody tr:first-child")).addClass("selected");let n=parseInt(a.getAttribute("data-rowIndex")),r={};r=-1==n?JSON.parse('{"probLevel":0.01,"tpr":0,"tnr":0,"fpr":0,"fnr":0,"sens":0,"spec":0,"accu":0,"prec":0,"confMatrix":{"nf_nf":0,"nf_f":0,"f_nf":0,"f_f":0},"rowIndex":0}'):s[t.modelID][e.dataSource].probStats[n],CONFUSION_MATRIX.generate({data:r})},f=async function(e){if(useTestData){return await MP_TEST_DATA.getData()}let t=SERVER.getBaseAddress()+"plot",a=CREDENTIALS.getUserCreds();if(null==a)throw new Error(i18n.en.APP.UI.ERROR.MODELCFG.USER_NOT_LOGGED_IN);let n=extend({key:a,projectKey:""},e);APP.setProgress("Loading data...");try{result=await SERVER.postData(t,n)}catch(e){result=null}return console.log(result),APP.resetProgress(),result};return e}(ML_LEADERBOARD||{}),MP_MODEL_COMPARISON=function(e){e.STORE_KEY="MP_MODEL_COMPARISON",e.dataSource="test";var t=null,a=function(){qs("#model-comparison").qs("#mc-sourceSelect").addEventListener("change",t=>{e.dataSource=t.target.value,qs("#model-comparison .tableContainer table").setAttribute("data-active-source",e.dataSource)})},n=async function(n){APP.resetCurrentPageMarker(),qs("#main-content").setAttribute("class",""),qs("#main-content").addClass("mp-model-comparison"),(t=STORE.getProjectData(n,MP_MODEL_COMPARISON.STORE_KEY))||(t=await e.loadData({projectKey:n}),STORE.setProjectData(n,MP_MODEL_COMPARISON.STORE_KEY,t),STORE.setProjectMetadata(n,MP_MODEL_COMPARISON.STORE_KEY+"_compData_loaded",!0),qs("#model-comparison").innerHTML=mpmodelcomparisonTemplate(),a())};e.show=async function(e){console.log("showing..."),await n(e),r()};var r=function(){let e="";Object.keys(t).forEach(a=>{["test","train"].forEach(n=>{e+=o({type:t[a].platform.toLowerCase(),id:a.toLowerCase(),name:t[a].name,source:n,auc:t[a][n].auc,acc:t[a][n].acc,ks:t[a][n].ks,gini:t[a][n].gini,br_s:t[a][n].br_s,recommended:t[a].isPreferred})})}),qsa("#model-comparison .tableContainer table tbody tr:not(.template-row)").forEach(e=>e.remove()),qs("#model-comparison .tableContainer table tbody").innerHTML=qs("#model-comparison .tableContainer table tbody").innerHTML+e,qs("#model-comparison .tableContainer tbody tr:nth-child(2) td").addClass("selected")},o=function(e){let t=qs("#model-comparison #mc-table tr.template-row");if(t){let a=t.cloneNode(!0);return a.removeClass("template-row"),a.addClass(e.source),e.recommended&&a.addClass("trophy"),a.setAttribute("data-source",e.source),a.qsa("td").forEach(t=>{t.hasClass("name")&&(t.setAttribute("data-type",e.type),t.setAttribute("data-source",e.source),t.addClass(`type-${e.type}`)),t.hasClass("link")?void 0!==e.link&&e.link&&(t.qs("a").href=e.link):(value=e[t.getAttribute("data-key")],"number"!=typeof value||Number.isInteger(value)?t.innerText=value:t.innerText=value.toFixed(3))}),a.outerHTML}return""};return e.selectRow=function(e){qsa("#model-comparison .tableContainer td.selected").forEach(e=>e.removeClass("selected")),qs(`#model-comparison .tableContainer td#${e}`).addClass("selected")},e.loadData=async function(e){let a=SERVER.getBaseAddress()+"comp",n=CREDENTIALS.getUserCreds();if(null==n)throw new Error(i18n.en.APP.UI.ERROR.MODELCFG.USER_NOT_LOGGED_IN);let r=extend({key:n,projectKey:""},e);APP.setProgress("Loading model data...",!0);let o=null;try{o=useTestData?await MC_TEST_DATA.getData():await SERVER.postData(a,r)}catch(e){o=null,APP.resetProgress()}return APP.resetProgress(),t=o,console.log(o),o},e}(MP_MODEL_COMPARISON||{}),AUTO_CODE=function(e){e.dataSource="test";var t=null,a=function(){qs("#auto-code-generator").addEventListener("change",t=>{if("md-sourceSelect"==t.target.id)e.dataSource=t.target.value,qs("#auto-code-generator .tableContainer table").setAttribute("data-active-source",e.dataSource);else if(t.target.hasClass("tab-input")){qsa(".tab-trigger[name='api-tab-group']:not(.template)").forEach(e=>e.removeClass("selected"));qs(`#${t.target.getAttribute("label-id")}`).addClass("selected")}}),qs("#auto-code-generator #md-table").addEventListener("click",e.selectRow)},n=async function(e){APP.resetCurrentPageMarker(),qs("#main-content").setAttribute("class",""),qs("#main-content").addClass("md-auto-code"),(t=STORE.getProjectData(e,MP_MODEL_COMPARISON.STORE_KEY))||(t=await MP_MODEL_COMPARISON.loadData({projectKey:e}),STORE.setProjectData(e,MP_MODEL_COMPARISON.STORE_KEY,t),STORE.setProjectMetadata(e,MP_MODEL_COMPARISON.STORE_KEY+"_compData_loaded",!0)),qs("#auto-code-generator").innerHTML=mdautocodegeneratorTemplate(),a()};e.show=async function(e){await n(e),r()};var r=function(){let a="";Object.keys(t).forEach(e=>{["test"].forEach(n=>{a+=o({type:t[e].platform.toLowerCase(),id:e.toLowerCase(),name:t[e].name,source:n,auc:t[e][n].auc,acc:t[e][n].acc,ks:t[e][n].ks,recommended:t[e].isPreferred,dPath:t[e].dPath})})}),qs("#auto-code-generator .tableContainer table tbody").innerHTML=a,e.selectRow(qs("#auto-code-generator .tableContainer tbody tr:first-child td:first-child")),new List(qs("#md-outer-container .model-list"),{valueNames:["name"]})},o=function(e){let t=qs("#auto-code-generator #md-table tr.template-row");if(t){let a=t.cloneNode(!0);return a.removeClass("template-row"),a.addClass(e.source),a.setAttribute("model-ID",e.id),e.recommended&&a.addClass("trophy"),a.setAttribute("data-source",e.source),a.qsa("td").forEach(t=>{t.hasClass("name")&&(t.setAttribute("data-type",e.type),t.setAttribute("data-source",e.source),t.addClass(`type-${e.type}`)),t.hasClass("dPath")?void 0!==e.dPath&&e.dPath&&t.qs("a").setAttribute("href",e.dPath):(value=e[t.getAttribute("data-key")],"number"!=typeof value||Number.isInteger(value)?t.innerText=value:t.innerText=value.toFixed(3))}),a.outerHTML}return""};return e.selectRow=function(e){let a=null;(a=e instanceof HTMLElement?e.closest("tr"):e.target.closest("tr"))&&(qsa("#auto-code-generator #md-table tbody tr.selected").forEach(e=>e.removeClass("selected")),a.addClass("selected"),modelID=a.getAttribute("model-id"),qsa("#auto-code-generator #api .tabsTriggersContainer label:not(.template)").forEach(e=>e.remove()),qs("#auto-code-generator #api .tabs-content-container").qsa(".tab-input:not(.template), .tab-content:not(.template)").forEach(e=>e.remove()),t[modelID.toUpperCase()].api||(t[modelID.toUpperCase()].api={Java:'\nimport au.com.bytecode.opencsv.CSVReader;\nimport hex.ModelCategory;\nimport hex.genmodel.GenModel;\nimport hex.genmodel.MojoModel;\nimport hex.genmodel.algos.tree.SharedTreeMojoModel;\nimport hex.genmodel.algos.glrm.GlrmMojoModel;\nimport hex.genmodel.easy.EasyPredictModelWrapper;\nimport hex.genmodel.easy.RowData;\nimport hex.genmodel.easy.prediction.*;\n\nprivate void loadModel(String modelName) throws Exception {\n  try {\n    loadMojo(modelName);\n  } catch (IOException e) {\n    loadPojo(modelName);  \n  }\n}\n\nprivate void loadMojo(String modelName) throws IOException {\n  GenModel genModel = MojoModel.load(modelName);\n  EasyPredictModelWrapper.Config config = new EasyPredictModelWrapper.Config().setModel(genModel).setConvertUnknownCategoricalLevelsToNa(true).setConvertInvalidNumbersToNa(setInvNumNA);\n\n  if (getTreePath)\n    config.setEnableLeafAssignment(true);\n\n  if (returnGLRMReconstruct)\n    config.setEnableGLRMReconstrut(true);\n\n  model = new EasyPredictModelWrapper(config);\n\n  BinomialModelPrediction p = model.predictBinomial(row);\n  if (getTreePath) {\n      writeTreePaths(p.leafNodeAssignments, output);\n    } else {\n      output.write(p.label);\n      output.write(",");\n      for (int i = 0; i < p.classProbabilities.length; i++) {\n        if (i > 0) {\n          output.write(",");\n        }\n        output.write(myDoubleToString(p.classProbabilities[i]));\n      }\n    }\n  }\n}\n  \npublic static void main() {\n  loadModel(modelName)\n}\n        ',PMML:"\n\x3c!-- Not Supported --\x3e\n        ",SQL:"\n-- Not Supported\n        "}),Object.keys(t[modelID.toUpperCase()].api).forEach((e,a)=>{let n=qs("#auto-code-generator #api .tabsTriggersContainer label.template").cloneNode(),r=qs("#auto-code-generator #api .tabs-content-container .tab-input.template").cloneNode(),o=qs("#auto-code-generator #api .tabs-content-container .tab-content.template").cloneNode(),s=t[modelID.toUpperCase()].api[e];n.removeClass("template,selected"),n.innerText=e,n.setAttribute("id",`tab-label-${e}`),n.setAttribute("for",`tab-radio-${e}`),r.removeClass("template"),r.innerText=s,r.setAttribute("id",`tab-radio-${e}`),r.setAttribute("label-id",`tab-label-${e}`),o.removeClass("template");o.innerHTML=`<pre><code class="${{java:"java",pmml:"xml",sql:"sql"}[e.toLowerCase()]}"></code></pre>`,o.qs("code").innerText=s,o.setAttribute("id",`tab-content-${e}`),qs("#auto-code-generator #api .tabsTriggersContainer").append(n),qs("#auto-code-generator #api .tabs-content-container").append(r),qs("#auto-code-generator #api .tabs-content-container").append(o),hljs.highlightBlock(o.qs("code")),console.log(a),0==a&&(n.addClass("selected"),r.checked=!0)}))},e}(AUTO_CODE||{}),SCORE_MODELS=function(e){e.STORE_KEY="MD_SCORE_MODELS",e.dataSource="test";var t=null,a=null,n=function(){COMPACT_LABEL.registerCompactLabel(qsa("#score-models .searchBar label.compact")),qs("#score-models #add-db-data-source").addEventListener("click",function(){qs("#source-button .dropdown-trigger-input").checked=!1,DB_CONNECTION.dbConnection({projectKey:a,destinationOnSuccess:"back",destinationOnError:"back",destinationOnCancel:"back",sourceType:"production"}).then(function(e){console.log(e),s(a)},function(e){console.log(e)})}),qs("#score-models #add-file-data-source").addEventListener("click",function(){qs("#source-button .dropdown-trigger-input").checked=!1,FILE_UPLOAD.fileUpload({projectKey:a,destinationOnSuccess:"back",destinationOnError:"back",destinationOnCancel:"back",sourceType:"production"}).then(function(e){console.log(e),s(a)},function(e){console.log(e)})}),qs("#score-models #start-scoring").addEventListener("click",function(e){let t=qs("#score-models .searchBar #select-md-sm-data-source").value,n=qs("#score-models .searchBar #select-md-sm-model-name").value;m({projectKey:a,model:n,source:t}).then(e=>{i({projectKey:a,scoring_ids:[e.data.posts[0].id]}).then(e=>{d.disconnect();let t=document.createElement("tbody");for(t.innerHTML=e;t.childNodes.length>0;){let e=qsa("#score-models .tableContainer table tbody tr");tr=t.childNodes[0],"running"==tr.getAttribute("status").toLowerCase()&&v(tr.getAttribute("score-id")),1==e.length?qs("#score-models .tableContainer table tbody").appendChild(tr):qs("#score-models .tableContainer table tbody").insertBefore(tr,e[1])}qsa("#score-models #md-sm-table .bind").forEach(e=>d.observe(e,{attributes:!0})),C()&&b(null,2)})})})},r=async function(e){a=e,APP.resetCurrentPageMarker(),qs("#main-content").setAttribute("class",""),qs("#main-content").addClass("md-score-models"),t=await u(a),qs("#score-models").innerHTML=mdscoremodelsTemplate(),n()};e.show=async function(e){console.log("showing..."),await r(e),o(e),await s(e),await l(e),C()&&b(null,2)};var o=function(e){let a="";Object.keys(t).forEach(e=>{["test"].forEach(n=>{a+=`<option value="${e.toUpperCase()}" id="md-sm-model-name-option-${e.toUpperCase()}">${t[e].name}</option>`})}),qs("#score-models #select-md-sm-model-name").innerHTML+=a},s=async function(e){let t="",a=await f({projectKey:e});try{a.data.posts[1].OutOfTime.length>0&&(a=a.data.posts[1].OutOfTime)||(a=[])}catch(e){a=[]}a.forEach(e=>{let a=e.name;e.name.includes("-")&&(a=e.name.substr(0,e.name.lastIndexOf("-"))),t+=`<option class="md-sm-data-source" value="${a}" id="md-sm-source-option-${e.name}">${a} [${e.type}]</option>`}),qsa("#score-models #select-md-sm-data-source .md-sm-data-source").forEach(e=>e.remove()),qs("#score-models #select-md-sm-data-source").innerHTML+=t,qs("#score-models #select-md-sm-data-source").setAttribute("data-source-count",a.length)},i=async function(e){let t="",a=await h(e),n=a.data.posts;a=n&&n.length>0?n:[];for(let n=0;n<a.length;n++){let r=a[n][0],o=await p(e.projectKey,r.model);"running"==r.status&&v(r.id),t+=c({type:o.platform.toLowerCase(),id:r.id,name:o.name,source:r.source,auc:r.auc,acc:r.acc,gini:r.gini,recommended:o.isPreferred,dPath:r.dpath,status:r.status})}return t},l=async function(e){let t=await i({projectKey:e});qsa("#score-models .tableContainer table tbody tr:not(.template-row)").forEach(e=>e.remove()),qs("#score-models .tableContainer table tbody").innerHTML+=t,qsa("#score-models #md-sm-table .bind").forEach(e=>d.observe(e,{attributes:!0}))},d=new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(e=>{console.log("wolverine comes!"),e.forEach(e=>{"attributes"==e.type&&e.attributeName.startsWith("data-")&&e.target.setAttribute("style",`--progress-value: ${e.target.getAttribute("data-value")}`)})}),c=function(e){let t=qs("#score-models #md-sm-table tr.template-row");if(t){let a=t.cloneNode(!0);return a.removeClass("template-row"),a.setAttribute("score-id",e.id),a.setAttribute("data-source",e.source),a.setAttribute("status",e.status.toLowerCase()),e.recommended&&a.addClass("trophy"),a.qsa("td").forEach(t=>{if(t.hasClass("name")&&(t.setAttribute("data-type",e.type),t.setAttribute("data-source",e.source),t.addClass(`type-${e.type}`)),t.hasClass("dPath"))void 0!==e.dPath&&e.dPath&&t.qs("a").setAttribute("href",e.dPath);else if(t.hasClass("progress")){let a=e.progress;a||(a=0),t.setAttribute("data-value",a),t.setAttribute("style","--progress-value: 0"),t.addClass("bind")}else{value=e[t.getAttribute("data-key")];let a="";if((t.hasClass("auc")||t.hasClass("acc"))&&(a="%"),"number"!=typeof value||Number.isInteger(value))if(Array.isArray(value)){for(;Array.isArray(value);)value=value.length>0?value[0]:"";t.innerText=value.toFixed(3)+a}else t.innerText=value;else t.innerText=value.toFixed(3)+a}}),a.outerHTML}return""},u=async function(e){return t?Promise.resolve(t):((t=STORE.getProjectData(e,MP_MODEL_COMPARISON.STORE_KEY))||(t=await MP_MODEL_COMPARISON.loadData({projectKey:e}),STORE.setProjectData(e,MP_MODEL_COMPARISON.STORE_KEY,t),STORE.setProjectMetadata(e,MP_MODEL_COMPARISON.STORE_KEY+"_compData_loaded",!0)),t)},p=async function(e,a){t=await u(e);let n=null;for(let e in t)if(e.toLowerCase()==a.toLowerCase()){n=t[e];break}return n},f=async function(e){let t=SERVER.getBaseAddress()+"connection/list/sources",a=CREDENTIALS.getUserCreds();if(APP.setProgress("Loading Sources...",!0),null==a)throw new Error(i18n.en.APP.UI.ERROR.MODELCFG.USER_NOT_LOGGED_IN);let n=extend({key:a,projectKey:""},e),r=null;try{r=useTestData?await MD_SCORE_MODELS_TEST_DATA.getSources(t,n):await SERVER.postData(t,n)}catch(e){r=null,APP.resetProgress()}return APP.resetProgress(),console.log(r),r},h=async function(e){let t=SERVER.getBaseAddress()+"score/list",a=CREDENTIALS.getUserCreds();if(APP.setProgress("Loading scores...",!0),null==a)throw new Error(i18n.en.APP.UI.ERROR.MODELCFG.USER_NOT_LOGGED_IN);let n=extend({key:a,projectKey:""},e),r=null;try{r=useTestData?await MD_SCORE_MODELS_TEST_DATA.getResults(t,n):await SERVER.postData(t,n)}catch(e){r=null}return APP.resetProgress(),console.log(r),r},m=async function(e){let t=SERVER.getBaseAddress()+"score/start",a=CREDENTIALS.getUserCreds();if(null==a)throw new Error(i18n.en.APP.UI.ERROR.MODELCFG.USER_NOT_LOGGED_IN);let n=extend({key:a,projectKey:""},e);APP.setProgress("Scoring...",!0);let r=null;try{r=useTestData?await MD_SCORE_MODELS_TEST_DATA.startScoring(t,n):await SERVER.postData(t,n)}catch(e){APP.resetProgress(),r=null}return APP.resetProgress(),console.log(r),r},g=!0,E=[],v=function(e){E.push(""+e)},P=function(t){let a=E.indexOf(""+t);a>=0&&E.splice(a,1),0==E.length&&e.cancelPolling()},C=function(){return E.length>0};e.cancelPolling=function(){g=!1,y&&clearTimeout(y)};var y=null,b=function(e,t){var n=Number(new Date)+(e||216e5);t=1e3*t||1e4,g=!0;var r=async function(e,o){y=null;try{APP.setProgress("Polling  Report...",!1);var s=await async function(e){let t=SERVER.getBaseAddress()+"score/progress",a=CREDENTIALS.getUserCreds();if(APP.setProgress("Getting scores...",!1),null==a)throw new Error(i18n.en.APP.UI.ERROR.MODELCFG.USER_NOT_LOGGED_IN);let n=extend({key:a,projectKey:"",scoring_ids:E},e),r=null;try{r=useTestData?await MD_SCORE_MODELS_TEST_DATA.getProgress(t,n):await SERVER.postData(t,n)}catch(e){r=null,APP.resetProgress()}return APP.resetProgress(),console.log(r),r}({projectKey:a});APP.resetProgress()}catch(e){return console.error("Exception in polling.\n",e),APP.showError("Error in retrieving updates from server. Please contact adminitrator."),o(e)}return s&&void 0!==s?Number(new Date)<n?(function(e){e.data.posts.forEach(e=>{qs(`#score-models #md-sm-table tr[score-id="${e.id}"] td.progress`).setAttribute("data-value",e.progress),100==e.progress&&(P(e.id),h({projectKey:a,scoring_ids:[e.id]}).then(function(t){let a=t.data.posts;for(let t=0;t<a.length;t++){let n=a[t];if(n.id==e.id){let t=qs(`#score-models #md-sm-table tr[score-id="${e.id}"]`);t.setAttribute("status","completed"),["auc","acc","gini"].forEach(e=>{let a=n[e],r="";"auc"!=e&&"acc"!=e||(r="%"),t.qs(`td.${e}`).innerText=a.toFixed(3)+r}),t.qs("td.dPath a").setAttribute("href",n.dpath)}}}))})}(s),C()?g?void(y=setTimeout(r,t,e,o)):(g=!0,o({State:"interrupted"})):e("done")):o(new Error("timed out for "+fn+": "+arguments)):(console.error("Null result in polling."),o(new Error("Error in retrieving updates from server. Please contact adminitrator.")))};return new Promise(r)};return e}(SCORE_MODELS||{});function entryPoint(e){onloadAlreadyRun=!0,APP.init()}document.addEventListener("DOMContentLoaded",function(e){onloadEventFired=!0,onloadAlreadyRun||entryPoint(e)}),onloadAlreadyRun||onloadEventFired||entryPoint(),"function"==typeof HTMLDialogElement?qs("html").classList.add("html5dialog"):qs("html").classList.add("no-html5dialog");try{CSS.supports("display","contents")?qs("html").classList.add("display-contents"):qs("html").classList.add("no-display-contents")}catch(e){qs("html").classList.add("no-display-contents")}
//# sourceMappingURL=script-min.js.map
